<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>API &#8212; Jinja Documentation (3.1.x)</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=bb251e69" />
    <link rel="stylesheet" type="text/css" href="_static/jinja.css?v=85659ec6" />
    <script src="_static/documentation_options.js?v=851b9b12"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script data-project="jinja" data-version="3.1.x" src="_static/describe_version.js?v=fa7f30d0"></script>
    <link rel="icon" href="_static/jinja-logo-sidebar.png"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Sandbox" href="sandbox.html" />
    <link rel="prev" title="Introduction" href="intro.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="sandbox.html" title="Sandbox"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="intro.html" title="Introduction"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Jinja Documentation (3.1.x)</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">API</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="api">
<h1>API<a class="headerlink" href="#api" title="Link to this heading">¶</a></h1>
<p>This document describes the API to Jinja and not the template language
(for that, see <a class="reference internal" href="templates.html"><span class="doc">Template Designer Documentation</span></a>). It will be most useful as reference
to those implementing the template interface to the application and not
those who are creating Jinja templates.</p>
<section id="basics">
<h2>Basics<a class="headerlink" href="#basics" title="Link to this heading">¶</a></h2>
<p>Jinja uses a central object called the template <a class="reference internal" href="#jinja2.Environment" title="jinja2.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code></a>.
Instances of this class are used to store the configuration and global objects,
and are used to load templates from the file system or other locations.
Even if you are creating templates from strings by using the constructor of
<a class="reference internal" href="#jinja2.Template" title="jinja2.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">Template</span></code></a> class, an environment is created automatically for you,
albeit a shared one.</p>
<p>Most applications will create one <a class="reference internal" href="#jinja2.Environment" title="jinja2.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code></a> object on application
initialization and use that to load templates.  In some cases however, it’s
useful to have multiple environments side by side, if different configurations
are in use.</p>
<p>The simplest way to configure Jinja to load templates for your
application is to use <a class="reference internal" href="#jinja2.PackageLoader" title="jinja2.loaders.PackageLoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">PackageLoader</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">PackageLoader</span><span class="p">,</span> <span class="n">select_autoescape</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span>
    <span class="n">loader</span><span class="o">=</span><span class="n">PackageLoader</span><span class="p">(</span><span class="s2">&quot;yourapp&quot;</span><span class="p">),</span>
    <span class="n">autoescape</span><span class="o">=</span><span class="n">select_autoescape</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This will create a template environment with a loader that looks up
templates in the <code class="docutils literal notranslate"><span class="pre">templates</span></code> folder inside the <code class="docutils literal notranslate"><span class="pre">yourapp</span></code> Python
package (or next to the <code class="docutils literal notranslate"><span class="pre">yourapp.py</span></code> Python module). It also enables
autoescaping for HTML files. This loader only requires that <code class="docutils literal notranslate"><span class="pre">yourapp</span></code>
is importable, it figures out the absolute path to the folder for you.</p>
<p>Different loaders are available to load templates in other ways or from
other locations. They’re listed in the <a class="reference internal" href="#loaders">Loaders</a> section below. You can
also write your own if you want to load templates from a source that’s
more specialized to your project.</p>
<p>To load a template from this environment, call the <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_template()</span></code>
method, which returns the loaded <a class="reference internal" href="#jinja2.Template" title="jinja2.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">Template</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">template</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">get_template</span><span class="p">(</span><span class="s2">&quot;mytemplate.html&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>To render it with some variables, call the <code class="xref py py-meth docutils literal notranslate"><span class="pre">render()</span></code> method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">the</span><span class="o">=</span><span class="s2">&quot;variables&quot;</span><span class="p">,</span> <span class="n">go</span><span class="o">=</span><span class="s2">&quot;here&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>Using a template loader rather than passing strings to <a class="reference internal" href="#jinja2.Template" title="jinja2.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">Template</span></code></a>
or <a class="reference internal" href="#jinja2.Environment.from_string" title="jinja2.Environment.from_string"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Environment.from_string()</span></code></a> has multiple advantages.  Besides being
a lot easier to use it also enables template inheritance.</p>
<div class="admonition-notes-on-autoescaping admonition">
<p class="admonition-title">Notes on Autoescaping</p>
<p>In future versions of Jinja we might enable autoescaping by default
for security reasons.  As such you are encouraged to explicitly
configure autoescaping now instead of relying on the default.</p>
</div>
</section>
<section id="high-level-api">
<h2>High Level API<a class="headerlink" href="#high-level-api" title="Link to this heading">¶</a></h2>
<p>The high-level API is the API you will use in the application to load and
render Jinja templates.  The <a class="reference internal" href="#low-level-api"><span class="std std-ref">Low Level API</span></a> on the other side is only
useful if you want to dig deeper into Jinja or <a class="reference internal" href="extensions.html#jinja-extensions"><span class="std std-ref">develop extensions</span></a>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="jinja2.Environment">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">Environment</span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment" title="Link to this definition">¶</a></dt>
<dd><p>The core component of Jinja is the <code class="code docutils literal notranslate"><span class="pre">Environment</span></code>.  It contains
important shared variables like configuration, filters, tests,
globals and others.  Instances of this class may be modified if
they are not shared and if no template was loaded so far.
Modifications on environments after the first template was loaded
will lead to surprising effects and undefined behavior.</p>
<p>Here are the possible initialization parameters:</p>
<blockquote>
<div><dl>
<dt><code class="code docutils literal notranslate"><span class="pre">block_start_string</span></code></dt><dd><p>The string marking the beginning of a block.  Defaults to <code class="docutils literal notranslate"><span class="pre">'{%'</span></code>.</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">block_end_string</span></code></dt><dd><p>The string marking the end of a block.  Defaults to <code class="docutils literal notranslate"><span class="pre">'%}'</span></code>.</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">variable_start_string</span></code></dt><dd><p>The string marking the beginning of a print statement.
Defaults to <code class="docutils literal notranslate"><span class="pre">'{{'</span></code>.</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">variable_end_string</span></code></dt><dd><p>The string marking the end of a print statement.  Defaults to
<code class="docutils literal notranslate"><span class="pre">'}}'</span></code>.</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">comment_start_string</span></code></dt><dd><p>The string marking the beginning of a comment.  Defaults to <code class="docutils literal notranslate"><span class="pre">'{#'</span></code>.</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">comment_end_string</span></code></dt><dd><p>The string marking the end of a comment.  Defaults to <code class="docutils literal notranslate"><span class="pre">'#}'</span></code>.</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">line_statement_prefix</span></code></dt><dd><p>If given and a string, this will be used as prefix for line based
statements.  See also <a class="reference internal" href="templates.html#line-statements"><span class="std std-ref">Line Statements</span></a>.</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">line_comment_prefix</span></code></dt><dd><p>If given and a string, this will be used as prefix for line based
comments.  See also <a class="reference internal" href="templates.html#line-statements"><span class="std std-ref">Line Statements</span></a>.</p>
<details class="changelog">
<summary>Changelog</summary><div class="versionadded">
<p><span class="versionmodified added">Added in version 2.2.</span></p>
</div>
</details></dd>
<dt><code class="code docutils literal notranslate"><span class="pre">trim_blocks</span></code></dt><dd><p>If this is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> the first newline after a block is
removed (block, not variable tag!).  Defaults to <code class="code docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">lstrip_blocks</span></code></dt><dd><p>If this is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> leading spaces and tabs are stripped
from the start of a line to a block.  Defaults to <code class="code docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">newline_sequence</span></code></dt><dd><p>The sequence that starts a newline.  Must be one of <code class="docutils literal notranslate"><span class="pre">'\r'</span></code>,
<code class="docutils literal notranslate"><span class="pre">'\n'</span></code> or <code class="docutils literal notranslate"><span class="pre">'\r\n'</span></code>.  The default is <code class="docutils literal notranslate"><span class="pre">'\n'</span></code> which is a
useful default for Linux and OS X systems as well as web
applications.</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">keep_trailing_newline</span></code></dt><dd><p>Preserve the trailing newline when rendering templates.
The default is <code class="docutils literal notranslate"><span class="pre">False</span></code>, which causes a single newline,
if present, to be stripped from the end of the template.</p>
<details class="changelog">
<summary>Changelog</summary><div class="versionadded">
<p><span class="versionmodified added">Added in version 2.7.</span></p>
</div>
</details></dd>
<dt><code class="code docutils literal notranslate"><span class="pre">extensions</span></code></dt><dd><p>List of Jinja extensions to use.  This can either be import paths
as strings or extension classes.  For more information have a
look at <a class="reference internal" href="extensions.html#jinja-extensions"><span class="std std-ref">the extensions documentation</span></a>.</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">optimized</span></code></dt><dd><p>should the optimizer be enabled?  Default is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">undefined</span></code></dt><dd><p><a class="reference internal" href="#jinja2.Undefined" title="jinja2.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a> or a subclass of it that is used to represent
undefined values in the template.</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">finalize</span></code></dt><dd><p>A callable that can be used to process the result of a variable
expression before it is output.  For example one can convert
<code class="docutils literal notranslate"><span class="pre">None</span></code> implicitly into an empty string here.</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">autoescape</span></code></dt><dd><p>If set to <code class="docutils literal notranslate"><span class="pre">True</span></code> the XML/HTML autoescaping feature is enabled by
default.  For more details about autoescaping see
<code class="xref py py-class docutils literal notranslate"><span class="pre">Markup</span></code>.  As of Jinja 2.4 this can also
be a callable that is passed the template name and has to
return <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> depending on autoescape should be
enabled by default.</p>
<details class="changelog">
<summary>Changelog</summary><div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.4: </span><code class="code docutils literal notranslate"><span class="pre">autoescape</span></code> can now be a function</p>
</div>
</details></dd>
<dt><code class="code docutils literal notranslate"><span class="pre">loader</span></code></dt><dd><p>The template loader for this environment.</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">cache_size</span></code></dt><dd><p>The size of the cache.  Per default this is <code class="docutils literal notranslate"><span class="pre">400</span></code> which means
that if more than 400 templates are loaded the loader will clean
out the least recently used template.  If the cache size is set to
<code class="docutils literal notranslate"><span class="pre">0</span></code> templates are recompiled all the time, if the cache size is
<code class="docutils literal notranslate"><span class="pre">-1</span></code> the cache will not be cleaned.</p>
<details class="changelog">
<summary>Changelog</summary><div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.8: </span>The cache size was increased to 400 from a low 50.</p>
</div>
</details></dd>
<dt><code class="code docutils literal notranslate"><span class="pre">auto_reload</span></code></dt><dd><p>Some loaders load templates from locations where the template
sources may change (ie: file system or database).  If
<code class="docutils literal notranslate"><span class="pre">auto_reload</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> (default) every time a template is
requested the loader checks if the source changed and if yes, it
will reload the template.  For higher performance it’s possible to
disable that.</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">bytecode_cache</span></code></dt><dd><p>If set to a bytecode cache object, this object will provide a
cache for the internal Jinja bytecode so that templates don’t
have to be parsed if they were not changed.</p>
<p>See <a class="reference internal" href="#bytecode-cache"><span class="std std-ref">Bytecode Cache</span></a> for more information.</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">enable_async</span></code></dt><dd><p>If set to true this enables async template execution which
allows using async functions and generators.</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>block_start_string</strong> (<em>str</em>)</p></li>
<li><p><strong>block_end_string</strong> (<em>str</em>)</p></li>
<li><p><strong>variable_start_string</strong> (<em>str</em>)</p></li>
<li><p><strong>variable_end_string</strong> (<em>str</em>)</p></li>
<li><p><strong>comment_start_string</strong> (<em>str</em>)</p></li>
<li><p><strong>comment_end_string</strong> (<em>str</em>)</p></li>
<li><p><strong>line_statement_prefix</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>line_comment_prefix</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>trim_blocks</strong> (<em>bool</em>)</p></li>
<li><p><strong>lstrip_blocks</strong> (<em>bool</em>)</p></li>
<li><p><strong>newline_sequence</strong> (<em>te.Literal</em><em>[</em><em>'\n'</em><em>, </em><em>'\r\n'</em><em>, </em><em>'\r'</em><em>]</em>)</p></li>
<li><p><strong>keep_trailing_newline</strong> (<em>bool</em>)</p></li>
<li><p><strong>extensions</strong> (<em>Sequence</em><em>[</em><em>str</em><em> | </em><em>Type</em><em>[</em><a class="reference internal" href="extensions.html#jinja2.ext.Extension" title="jinja2.ext.Extension"><em>Extension</em></a><em>]</em><em>]</em>)</p></li>
<li><p><strong>optimized</strong> (<em>bool</em>)</p></li>
<li><p><strong>undefined</strong> (<em>Type</em><em>[</em><a class="reference internal" href="#jinja2.Undefined" title="jinja2.runtime.Undefined"><em>Undefined</em></a><em>]</em>)</p></li>
<li><p><strong>finalize</strong> (<em>Callable</em><em>[</em><em>[</em><em>...</em><em>]</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>autoescape</strong> (<em>bool</em><em> | </em><em>Callable</em><em>[</em><em>[</em><em>str</em><em> | </em><em>None</em><em>]</em><em>, </em><em>bool</em><em>]</em>)</p></li>
<li><p><strong>loader</strong> (<a class="reference internal" href="#jinja2.BaseLoader" title="jinja2.BaseLoader"><em>BaseLoader</em></a><em> | </em><em>None</em>)</p></li>
<li><p><strong>cache_size</strong> (<em>int</em>)</p></li>
<li><p><strong>auto_reload</strong> (<em>bool</em>)</p></li>
<li><p><strong>bytecode_cache</strong> (<a class="reference internal" href="#jinja2.BytecodeCache" title="jinja2.BytecodeCache"><em>BytecodeCache</em></a><em> | </em><em>None</em>)</p></li>
<li><p><strong>enable_async</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.Environment.shared">
<span class="sig-name descname"><span class="pre">shared</span></span><a class="headerlink" href="#jinja2.Environment.shared" title="Link to this definition">¶</a></dt>
<dd><p>If a template was created by using the <a class="reference internal" href="#jinja2.Template" title="jinja2.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">Template</span></code></a> constructor
an environment is created automatically.  These environments are
created as shared environments which means that multiple templates
may have the same anonymous environment.  For all shared environments
this attribute is <code class="code docutils literal notranslate"><span class="pre">True</span></code>, else <code class="code docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.Environment.sandboxed">
<span class="sig-name descname"><span class="pre">sandboxed</span></span><a class="headerlink" href="#jinja2.Environment.sandboxed" title="Link to this definition">¶</a></dt>
<dd><p>If the environment is sandboxed this attribute is <code class="code docutils literal notranslate"><span class="pre">True</span></code>.  For the
sandbox mode have a look at the documentation for the
<a class="reference internal" href="sandbox.html#jinja2.sandbox.SandboxedEnvironment" title="jinja2.sandbox.SandboxedEnvironment"><code class="xref py py-class docutils literal notranslate"><span class="pre">SandboxedEnvironment</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.Environment.filters">
<span class="sig-name descname"><span class="pre">filters</span></span><a class="headerlink" href="#jinja2.Environment.filters" title="Link to this definition">¶</a></dt>
<dd><p>A dict of filters for this environment.  As long as no template was
loaded it’s safe to add new filters or remove old.  For custom filters
see <a class="reference internal" href="#writing-filters"><span class="std std-ref">Custom Filters</span></a>.  For valid filter names have a look at
<a class="reference internal" href="#identifier-naming"><span class="std std-ref">Notes on Identifiers</span></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.Environment.tests">
<span class="sig-name descname"><span class="pre">tests</span></span><a class="headerlink" href="#jinja2.Environment.tests" title="Link to this definition">¶</a></dt>
<dd><p>A dict of test functions for this environment.  As long as no
template was loaded it’s safe to modify this dict.  For custom tests
see <a class="reference internal" href="#writing-tests"><span class="std std-ref">Custom Tests</span></a>.  For valid test names have a look at
<a class="reference internal" href="#identifier-naming"><span class="std std-ref">Notes on Identifiers</span></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.Environment.globals">
<span class="sig-name descname"><span class="pre">globals</span></span><a class="headerlink" href="#jinja2.Environment.globals" title="Link to this definition">¶</a></dt>
<dd><p>A dict of variables that are available in every template loaded
by the environment. As long as no template was loaded it’s safe
to modify this. For more details see <a class="reference internal" href="#global-namespace"><span class="std std-ref">The Global Namespace</span></a>.
For valid object names see <a class="reference internal" href="#identifier-naming"><span class="std std-ref">Notes on Identifiers</span></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.Environment.policies">
<span class="sig-name descname"><span class="pre">policies</span></span><a class="headerlink" href="#jinja2.Environment.policies" title="Link to this definition">¶</a></dt>
<dd><p>A dictionary with <a class="reference internal" href="#policies"><span class="std std-ref">Policies</span></a>.  These can be reconfigured to
change the runtime behavior or certain template features.  Usually
these are security related.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.Environment.code_generator_class">
<span class="sig-name descname"><span class="pre">code_generator_class</span></span><a class="headerlink" href="#jinja2.Environment.code_generator_class" title="Link to this definition">¶</a></dt>
<dd><p>The class used for code generation.  This should not be changed
in most cases, unless you need to modify the Python code a
template compiles to.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.Environment.context_class">
<span class="sig-name descname"><span class="pre">context_class</span></span><a class="headerlink" href="#jinja2.Environment.context_class" title="Link to this definition">¶</a></dt>
<dd><p>The context used for templates.  This should not be changed
in most cases, unless you need to modify internals of how
template variables are handled.  For details, see
<a class="reference internal" href="#jinja2.runtime.Context" title="jinja2.runtime.Context"><code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.Environment.overlay">
<span class="sig-name descname"><span class="pre">overlay</span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.overlay" title="Link to this definition">¶</a></dt>
<dd><p>Create a new overlay environment that shares all the data with the
current environment except for cache and the overridden attributes.
Extensions cannot be removed for an overlayed environment.  An overlayed
environment automatically gets all the extensions of the environment it
is linked to plus optional extra extensions.</p>
<p>Creating overlays should happen after the initial environment was set
up completely.  Not all attributes are truly linked, some are just
copied over so modifications on the original environment may not shine
through.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 3.1.5: </span><code class="docutils literal notranslate"><span class="pre">enable_async</span></code> is applied correctly.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 3.1.2: </span>Added the <code class="docutils literal notranslate"><span class="pre">newline_sequence</span></code>, <code class="docutils literal notranslate"><span class="pre">keep_trailing_newline</span></code>,
and <code class="docutils literal notranslate"><span class="pre">enable_async</span></code> parameters to match <code class="docutils literal notranslate"><span class="pre">__init__</span></code>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>block_start_string</strong> (<em>str</em>)</p></li>
<li><p><strong>block_end_string</strong> (<em>str</em>)</p></li>
<li><p><strong>variable_start_string</strong> (<em>str</em>)</p></li>
<li><p><strong>variable_end_string</strong> (<em>str</em>)</p></li>
<li><p><strong>comment_start_string</strong> (<em>str</em>)</p></li>
<li><p><strong>comment_end_string</strong> (<em>str</em>)</p></li>
<li><p><strong>line_statement_prefix</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>line_comment_prefix</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>trim_blocks</strong> (<em>bool</em>)</p></li>
<li><p><strong>lstrip_blocks</strong> (<em>bool</em>)</p></li>
<li><p><strong>newline_sequence</strong> (<em>te.Literal</em><em>[</em><em>'\n'</em><em>, </em><em>'\r\n'</em><em>, </em><em>'\r'</em><em>]</em>)</p></li>
<li><p><strong>keep_trailing_newline</strong> (<em>bool</em>)</p></li>
<li><p><strong>extensions</strong> (<em>Sequence</em><em>[</em><em>str</em><em> | </em><em>Type</em><em>[</em><a class="reference internal" href="extensions.html#jinja2.ext.Extension" title="jinja2.ext.Extension"><em>Extension</em></a><em>]</em><em>]</em>)</p></li>
<li><p><strong>optimized</strong> (<em>bool</em>)</p></li>
<li><p><strong>undefined</strong> (<em>Type</em><em>[</em><a class="reference internal" href="#jinja2.Undefined" title="jinja2.runtime.Undefined"><em>Undefined</em></a><em>]</em>)</p></li>
<li><p><strong>finalize</strong> (<em>Callable</em><em>[</em><em>[</em><em>...</em><em>]</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>autoescape</strong> (<em>bool</em><em> | </em><em>Callable</em><em>[</em><em>[</em><em>str</em><em> | </em><em>None</em><em>]</em><em>, </em><em>bool</em><em>]</em>)</p></li>
<li><p><strong>loader</strong> (<a class="reference internal" href="#jinja2.BaseLoader" title="jinja2.BaseLoader"><em>BaseLoader</em></a><em> | </em><em>None</em>)</p></li>
<li><p><strong>cache_size</strong> (<em>int</em>)</p></li>
<li><p><strong>auto_reload</strong> (<em>bool</em>)</p></li>
<li><p><strong>bytecode_cache</strong> (<a class="reference internal" href="#jinja2.BytecodeCache" title="jinja2.BytecodeCache"><em>BytecodeCache</em></a><em> | </em><em>None</em>)</p></li>
<li><p><strong>enable_async</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>te.Self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.Environment.undefined">
<span class="sig-name descname"><span class="pre">undefined</span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">hint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exc</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.undefined" title="Link to this definition">¶</a></dt>
<dd><p>Creates a new <a class="reference internal" href="#jinja2.Undefined" title="jinja2.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a> object for <code class="code docutils literal notranslate"><span class="pre">name</span></code>.  This is useful
for filters or functions that may return undefined objects for
some operations.  All parameters except of <code class="code docutils literal notranslate"><span class="pre">hint</span></code> should be provided
as keyword parameters for better readability.  The <code class="code docutils literal notranslate"><span class="pre">hint</span></code> is used as
error message for the exception if provided, otherwise the error
message will be generated from <code class="code docutils literal notranslate"><span class="pre">obj</span></code> and <code class="code docutils literal notranslate"><span class="pre">name</span></code> automatically.  The exception
provided as <code class="code docutils literal notranslate"><span class="pre">exc</span></code> is raised if something with the generated undefined
object is done that the undefined object does not allow.  The default
exception is <a class="reference internal" href="#jinja2.UndefinedError" title="jinja2.UndefinedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UndefinedError</span></code></a>.  If a <code class="code docutils literal notranslate"><span class="pre">hint</span></code> is provided the
<code class="code docutils literal notranslate"><span class="pre">name</span></code> may be omitted.</p>
<p>The most common way to create an undefined object is by providing
a name only:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="n">environment</span><span class="o">.</span><span class="n">undefined</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;some_name&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This means that the name <code class="code docutils literal notranslate"><span class="pre">some_name</span></code> is not defined.  If the name
was from an attribute of an object it makes sense to tell the
undefined object the holder object to improve the error message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;attr&#39;</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">environment</span><span class="o">.</span><span class="n">undefined</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;attr&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>For a more complex example you can provide a hint.  For example
the <code class="xref py py-func docutils literal notranslate"><span class="pre">first()</span></code> filter creates an undefined object that way:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="n">environment</span><span class="o">.</span><span class="n">undefined</span><span class="p">(</span><span class="s1">&#39;no first item, sequence was empty&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If it the <code class="code docutils literal notranslate"><span class="pre">name</span></code> or <code class="code docutils literal notranslate"><span class="pre">obj</span></code> is known (for example because an attribute
was accessed) it should be passed to the undefined object, even if
a custom <code class="code docutils literal notranslate"><span class="pre">hint</span></code> is provided.  This gives undefined objects the
possibility to enhance the error message.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.Environment.add_extension">
<span class="sig-name descname"><span class="pre">add_extension</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">extension</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.add_extension" title="Link to this definition">¶</a></dt>
<dd><p>Adds an extension after the environment was created.</p>
<details class="changelog">
<summary>Changelog</summary><div class="versionadded">
<p><span class="versionmodified added">Added in version 2.5.</span></p>
</div>
</details><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>extension</strong> (<em>str</em><em> | </em><em>Type</em><em>[</em><a class="reference internal" href="extensions.html#jinja2.ext.Extension" title="jinja2.ext.Extension"><em>Extension</em></a><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.Environment.extend">
<span class="sig-name descname"><span class="pre">extend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">attributes</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.extend" title="Link to this definition">¶</a></dt>
<dd><p>Add the items to the instance of the environment if they do not exist
yet.  This is used by <a class="reference internal" href="extensions.html#writing-extensions"><span class="std std-ref">extensions</span></a> to register
callbacks and configuration values without breaking inheritance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>attributes</strong> (<em>Any</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.Environment.compile_expression">
<span class="sig-name descname"><span class="pre">compile_expression</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">undefined_to_none</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.compile_expression" title="Link to this definition">¶</a></dt>
<dd><p>A handy helper method that returns a callable that accepts keyword
arguments that appear as variables in the expression.  If called it
returns the result of the expression.</p>
<p>This is useful if applications want to use the same rules as Jinja
in template “configuration files” or similar situations.</p>
<p>Example usage:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">compile_expression</span><span class="p">(</span><span class="s1">&#39;foo == 42&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="mi">23</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Per default the return value is converted to <code class="code docutils literal notranslate"><span class="pre">None</span></code> if the
expression returns an undefined value.  This can be changed
by setting <code class="code docutils literal notranslate"><span class="pre">undefined_to_none</span></code> to <code class="code docutils literal notranslate"><span class="pre">False</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">compile_expression</span><span class="p">(</span><span class="s1">&#39;var&#39;</span><span class="p">)()</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">compile_expression</span><span class="p">(</span><span class="s1">&#39;var&#39;</span><span class="p">,</span> <span class="n">undefined_to_none</span><span class="o">=</span><span class="kc">False</span><span class="p">)()</span>
<span class="go">Undefined</span>
</pre></div>
</div>
<details class="changelog">
<summary>Changelog</summary><div class="versionadded">
<p><span class="versionmodified added">Added in version 2.1.</span></p>
</div>
</details><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<em>str</em>)</p></li>
<li><p><strong>undefined_to_none</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>TemplateExpression</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.Environment.compile_templates">
<span class="sig-name descname"><span class="pre">compile_templates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extensions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'deflated'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_function</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.compile_templates" title="Link to this definition">¶</a></dt>
<dd><p>Finds all the templates the loader can find, compiles them
and stores them in <code class="code docutils literal notranslate"><span class="pre">target</span></code>.  If <code class="code docutils literal notranslate"><span class="pre">zip</span></code> is <code class="code docutils literal notranslate"><span class="pre">None</span></code>, instead of in a
zipfile, the templates will be stored in a directory.
By default a deflate zip algorithm is used. To switch to
the stored algorithm, <code class="code docutils literal notranslate"><span class="pre">zip</span></code> can be set to <code class="docutils literal notranslate"><span class="pre">'stored'</span></code>.</p>
<p><code class="code docutils literal notranslate"><span class="pre">extensions</span></code> and <code class="code docutils literal notranslate"><span class="pre">filter_func</span></code> are passed to <a class="reference internal" href="#jinja2.Environment.list_templates" title="jinja2.Environment.list_templates"><code class="xref py py-meth docutils literal notranslate"><span class="pre">list_templates()</span></code></a>.
Each template returned will be compiled to the target folder or
zipfile.</p>
<p>By default template compilation errors are ignored.  In case a
log function is provided, errors are logged.  If you want template
syntax errors to abort the compilation you can set <code class="code docutils literal notranslate"><span class="pre">ignore_errors</span></code>
to <code class="code docutils literal notranslate"><span class="pre">False</span></code> and you will get an exception on syntax errors.</p>
<details class="changelog">
<summary>Changelog</summary><div class="versionadded">
<p><span class="versionmodified added">Added in version 2.4.</span></p>
</div>
</details><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<em>str</em><em> | </em><em>PathLike</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>extensions</strong> (<em>Collection</em><em>[</em><em>str</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>filter_func</strong> (<em>Callable</em><em>[</em><em>[</em><em>str</em><em>]</em><em>, </em><em>bool</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>zip</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>log_function</strong> (<em>Callable</em><em>[</em><em>[</em><em>str</em><em>]</em><em>, </em><em>None</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>ignore_errors</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.Environment.list_templates">
<span class="sig-name descname"><span class="pre">list_templates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">extensions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.list_templates" title="Link to this definition">¶</a></dt>
<dd><p>Returns a list of templates for this environment.  This requires
that the loader supports the loader’s
<code class="xref py py-meth docutils literal notranslate"><span class="pre">list_templates()</span></code> method.</p>
<p>If there are other files in the template folder besides the
actual templates, the returned list can be filtered.  There are two
ways: either <code class="code docutils literal notranslate"><span class="pre">extensions</span></code> is set to a list of file extensions for
templates, or a <code class="code docutils literal notranslate"><span class="pre">filter_func</span></code> can be provided which is a callable that
is passed a template name and should return <code class="code docutils literal notranslate"><span class="pre">True</span></code> if it should end up
in the result list.</p>
<p>If the loader does not support that, a <code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code> is raised.</p>
<details class="changelog">
<summary>Changelog</summary><div class="versionadded">
<p><span class="versionmodified added">Added in version 2.4.</span></p>
</div>
</details><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>extensions</strong> (<em>Collection</em><em>[</em><em>str</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>filter_func</strong> (<em>Callable</em><em>[</em><em>[</em><em>str</em><em>]</em><em>, </em><em>bool</em><em>] </em><em>| </em><em>None</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>List</em>[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.Environment.join_path">
<span class="sig-name descname"><span class="pre">join_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.join_path" title="Link to this definition">¶</a></dt>
<dd><p>Join a template with the parent.  By default all the lookups are
relative to the loader root so this method returns the <code class="code docutils literal notranslate"><span class="pre">template</span></code>
parameter unchanged, but if the paths should be relative to the
parent template, this function can be used to calculate the real
template name.</p>
<p>Subclasses may override this method and implement template path
joining here.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template</strong> (<em>str</em>)</p></li>
<li><p><strong>parent</strong> (<em>str</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.Environment.get_template">
<span class="sig-name descname"><span class="pre">get_template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">globals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.get_template" title="Link to this definition">¶</a></dt>
<dd><p>Load a template by name with <code class="xref py py-attr docutils literal notranslate"><span class="pre">loader</span></code> and return a
<a class="reference internal" href="#jinja2.Template" title="jinja2.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">Template</span></code></a>. If the template does not exist a
<a class="reference internal" href="#jinja2.TemplateNotFound" title="jinja2.TemplateNotFound"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TemplateNotFound</span></code></a> exception is raised.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em><em> | </em><a class="reference internal" href="#jinja2.Template" title="jinja2.environment.Template"><em>Template</em></a>) – Name of the template to load. When loading
templates from the filesystem, “/” is used as the path
separator, even on Windows.</p></li>
<li><p><strong>parent</strong> (<em>str</em><em> | </em><em>None</em>) – The name of the parent template importing this
template. <a class="reference internal" href="#jinja2.Environment.join_path" title="jinja2.Environment.join_path"><code class="xref py py-meth docutils literal notranslate"><span class="pre">join_path()</span></code></a> can be used to implement name
transformations with this.</p></li>
<li><p><strong>globals</strong> (<em>MutableMapping</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Extend the environment <a class="reference internal" href="#jinja2.Environment.globals" title="jinja2.Environment.globals"><code class="xref py py-attr docutils literal notranslate"><span class="pre">globals</span></code></a> with
these extra variables available for all renders of this
template. If the template has already been loaded and
cached, its globals are updated with any new items.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#jinja2.Template" title="jinja2.environment.Template"><em>Template</em></a></p>
</dd>
</dl>
<details class="changelog">
<summary>Changelog</summary><div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 3.0: </span>If a template is loaded from cache, <code class="docutils literal notranslate"><span class="pre">globals</span></code> will update
the template’s globals instead of ignoring the new values.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.4: </span>If <code class="docutils literal notranslate"><span class="pre">name</span></code> is a <a class="reference internal" href="#jinja2.Template" title="jinja2.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">Template</span></code></a> object it is returned
unchanged.</p>
</div>
</details></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.Environment.select_template">
<span class="sig-name descname"><span class="pre">select_template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">names</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">globals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.select_template" title="Link to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#jinja2.Environment.get_template" title="jinja2.Environment.get_template"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_template()</span></code></a>, but tries loading multiple names.
If none of the names can be loaded a <a class="reference internal" href="#jinja2.TemplatesNotFound" title="jinja2.TemplatesNotFound"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TemplatesNotFound</span></code></a>
exception is raised.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>names</strong> (<em>Iterable</em><em>[</em><em>str</em><em> | </em><a class="reference internal" href="#jinja2.Template" title="jinja2.environment.Template"><em>Template</em></a><em>]</em>) – List of template names to try loading in order.</p></li>
<li><p><strong>parent</strong> (<em>str</em><em> | </em><em>None</em>) – The name of the parent template importing this
template. <a class="reference internal" href="#jinja2.Environment.join_path" title="jinja2.Environment.join_path"><code class="xref py py-meth docutils literal notranslate"><span class="pre">join_path()</span></code></a> can be used to implement name
transformations with this.</p></li>
<li><p><strong>globals</strong> (<em>MutableMapping</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Extend the environment <a class="reference internal" href="#jinja2.Environment.globals" title="jinja2.Environment.globals"><code class="xref py py-attr docutils literal notranslate"><span class="pre">globals</span></code></a> with
these extra variables available for all renders of this
template. If the template has already been loaded and
cached, its globals are updated with any new items.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#jinja2.Template" title="jinja2.environment.Template"><em>Template</em></a></p>
</dd>
</dl>
<details class="changelog">
<summary>Changelog</summary><div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 3.0: </span>If a template is loaded from cache, <code class="docutils literal notranslate"><span class="pre">globals</span></code> will update
the template’s globals instead of ignoring the new values.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.11: </span>If <code class="docutils literal notranslate"><span class="pre">names</span></code> is <a class="reference internal" href="#jinja2.Undefined" title="jinja2.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a>, an <a class="reference internal" href="#jinja2.UndefinedError" title="jinja2.UndefinedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UndefinedError</span></code></a>
is raised instead. If no templates were found and <code class="docutils literal notranslate"><span class="pre">names</span></code>
contains <a class="reference internal" href="#jinja2.Undefined" title="jinja2.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a>, the message is more helpful.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.4: </span>If <code class="docutils literal notranslate"><span class="pre">names</span></code> contains a <a class="reference internal" href="#jinja2.Template" title="jinja2.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">Template</span></code></a> object it is
returned unchanged.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.3.</span></p>
</div>
</details></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.Environment.get_or_select_template">
<span class="sig-name descname"><span class="pre">get_or_select_template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template_name_or_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">globals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.get_or_select_template" title="Link to this definition">¶</a></dt>
<dd><p>Use <a class="reference internal" href="#jinja2.Environment.select_template" title="jinja2.Environment.select_template"><code class="xref py py-meth docutils literal notranslate"><span class="pre">select_template()</span></code></a> if an iterable of template names
is given, or <a class="reference internal" href="#jinja2.Environment.get_template" title="jinja2.Environment.get_template"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_template()</span></code></a> if one name is given.</p>
<details class="changelog">
<summary>Changelog</summary><div class="versionadded">
<p><span class="versionmodified added">Added in version 2.3.</span></p>
</div>
</details><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template_name_or_list</strong> (<em>str</em><em> | </em><a class="reference internal" href="#jinja2.Template" title="jinja2.environment.Template"><em>Template</em></a><em> | </em><em>List</em><em>[</em><em>str</em><em> | </em><a class="reference internal" href="#jinja2.Template" title="jinja2.environment.Template"><em>Template</em></a><em>]</em>)</p></li>
<li><p><strong>parent</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>globals</strong> (<em>MutableMapping</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#jinja2.Template" title="jinja2.environment.Template"><em>Template</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.Environment.from_string">
<span class="sig-name descname"><span class="pre">from_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">globals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.from_string" title="Link to this definition">¶</a></dt>
<dd><p>Load a template from a source string without using
<code class="xref py py-attr docutils literal notranslate"><span class="pre">loader</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<em>str</em><em> | </em><a class="reference internal" href="extensions.html#jinja2.nodes.Template" title="jinja2.nodes.Template"><em>Template</em></a>) – Jinja source to compile into a template.</p></li>
<li><p><strong>globals</strong> (<em>MutableMapping</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Extend the environment <a class="reference internal" href="#jinja2.Environment.globals" title="jinja2.Environment.globals"><code class="xref py py-attr docutils literal notranslate"><span class="pre">globals</span></code></a> with
these extra variables available for all renders of this
template. If the template has already been loaded and
cached, its globals are updated with any new items.</p></li>
<li><p><strong>template_class</strong> (<em>Type</em><em>[</em><a class="reference internal" href="#jinja2.Template" title="jinja2.environment.Template"><em>Template</em></a><em>] </em><em>| </em><em>None</em>) – Return an instance of this
<a class="reference internal" href="#jinja2.Template" title="jinja2.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">Template</span></code></a> class.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#jinja2.Template" title="jinja2.environment.Template"><em>Template</em></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="jinja2.Template">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">Template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_start_string</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">BLOCK_START_STRING</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_end_string</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">BLOCK_END_STRING</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable_start_string</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">VARIABLE_START_STRING</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable_end_string</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">VARIABLE_END_STRING</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comment_start_string</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">COMMENT_START_STRING</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comment_end_string</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">COMMENT_END_STRING</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_statement_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">LINE_STATEMENT_PREFIX</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_comment_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">LINE_COMMENT_PREFIX</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trim_blocks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">TRIM_BLOCKS</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lstrip_blocks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">LSTRIP_BLOCKS</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newline_sequence</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">NEWLINE_SEQUENCE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_trailing_newline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">KEEP_TRAILING_NEWLINE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extensions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimized</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">undefined</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">Undefined</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">finalize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autoescape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_async</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Template" title="Link to this definition">¶</a></dt>
<dd><p>A compiled template that can be rendered.</p>
<p>Use the methods on <a class="reference internal" href="#jinja2.Environment" title="jinja2.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code></a> to create or load templates.
The environment is used to configure how templates are compiled and
behave.</p>
<p>It is also possible to create a template object directly. This is
not usually recommended. The constructor takes most of the same
arguments as <a class="reference internal" href="#jinja2.Environment" title="jinja2.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code></a>. All templates created with the
same environment arguments share the same ephemeral <code class="docutils literal notranslate"><span class="pre">Environment</span></code>
instance behind the scenes.</p>
<p>A template object should be considered immutable. Modifications on
the object are not supported.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<em>str</em><em> | </em><a class="reference internal" href="extensions.html#jinja2.nodes.Template" title="jinja2.nodes.Template"><em>Template</em></a>)</p></li>
<li><p><strong>block_start_string</strong> (<em>str</em>)</p></li>
<li><p><strong>block_end_string</strong> (<em>str</em>)</p></li>
<li><p><strong>variable_start_string</strong> (<em>str</em>)</p></li>
<li><p><strong>variable_end_string</strong> (<em>str</em>)</p></li>
<li><p><strong>comment_start_string</strong> (<em>str</em>)</p></li>
<li><p><strong>comment_end_string</strong> (<em>str</em>)</p></li>
<li><p><strong>line_statement_prefix</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>line_comment_prefix</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>trim_blocks</strong> (<em>bool</em>)</p></li>
<li><p><strong>lstrip_blocks</strong> (<em>bool</em>)</p></li>
<li><p><strong>newline_sequence</strong> (<em>te.Literal</em><em>[</em><em>'\n'</em><em>, </em><em>'\r\n'</em><em>, </em><em>'\r'</em><em>]</em>)</p></li>
<li><p><strong>keep_trailing_newline</strong> (<em>bool</em>)</p></li>
<li><p><strong>extensions</strong> (<em>Sequence</em><em>[</em><em>str</em><em> | </em><em>Type</em><em>[</em><a class="reference internal" href="extensions.html#jinja2.ext.Extension" title="jinja2.ext.Extension"><em>Extension</em></a><em>]</em><em>]</em>)</p></li>
<li><p><strong>optimized</strong> (<em>bool</em>)</p></li>
<li><p><strong>undefined</strong> (<em>Type</em><em>[</em><a class="reference internal" href="#jinja2.Undefined" title="jinja2.runtime.Undefined"><em>Undefined</em></a><em>]</em>)</p></li>
<li><p><strong>finalize</strong> (<em>Callable</em><em>[</em><em>[</em><em>...</em><em>]</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>autoescape</strong> (<em>bool</em><em> | </em><em>Callable</em><em>[</em><em>[</em><em>str</em><em> | </em><em>None</em><em>]</em><em>, </em><em>bool</em><em>]</em>)</p></li>
<li><p><strong>enable_async</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Any</em></p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.Template.globals">
<span class="sig-name descname"><span class="pre">globals</span></span><a class="headerlink" href="#jinja2.Template.globals" title="Link to this definition">¶</a></dt>
<dd><p>A dict of variables that are available every time the template
is rendered, without needing to pass them during render. This
should not be modified, as depending on how the template was
loaded it may be shared with the environment and other
templates.</p>
<p>Defaults to <a class="reference internal" href="#jinja2.Environment.globals" title="jinja2.Environment.globals"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Environment.globals</span></code></a> unless extra values are
passed to <a class="reference internal" href="#jinja2.Environment.get_template" title="jinja2.Environment.get_template"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Environment.get_template()</span></code></a>.</p>
<p>Globals are only intended for data that is common to every
render of the template. Specific data should be passed to
<a class="reference internal" href="#jinja2.Template.render" title="jinja2.Template.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">render()</span></code></a>.</p>
<p>See <a class="reference internal" href="#global-namespace"><span class="std std-ref">The Global Namespace</span></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.Template.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#jinja2.Template.name" title="Link to this definition">¶</a></dt>
<dd><p>The loading name of the template.  If the template was loaded from a
string this is <code class="code docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.Template.filename">
<span class="sig-name descname"><span class="pre">filename</span></span><a class="headerlink" href="#jinja2.Template.filename" title="Link to this definition">¶</a></dt>
<dd><p>The filename of the template on the file system if it was loaded from
there.  Otherwise this is <code class="code docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.Template.render">
<span class="sig-name descname"><span class="pre">render</span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Template.render" title="Link to this definition">¶</a></dt>
<dd><p>This method accepts the same arguments as the <code class="code docutils literal notranslate"><span class="pre">dict</span></code> constructor:
A dict, a dict subclass or some keyword arguments.  If no arguments
are given the context will be empty.  These two calls do the same:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">knights</span><span class="o">=</span><span class="s1">&#39;that say nih&#39;</span><span class="p">)</span>
<span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">({</span><span class="s1">&#39;knights&#39;</span><span class="p">:</span> <span class="s1">&#39;that say nih&#39;</span><span class="p">})</span>
</pre></div>
</div>
<p>This will return the rendered template as a string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>Any</em>)</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.Template.generate">
<span class="sig-name descname"><span class="pre">generate</span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Template.generate" title="Link to this definition">¶</a></dt>
<dd><p>For very large templates it can be useful to not render the whole
template at once but evaluate each statement after another and yield
piece for piece.  This method basically does exactly that and returns
a generator that yields one item after another as strings.</p>
<p>It accepts the same arguments as <a class="reference internal" href="#jinja2.Template.render" title="jinja2.Template.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">render()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>Any</em>)</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Iterator</em>[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.Template.stream">
<span class="sig-name descname"><span class="pre">stream</span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Template.stream" title="Link to this definition">¶</a></dt>
<dd><p>Works exactly like <a class="reference internal" href="#jinja2.Template.generate" title="jinja2.Template.generate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">generate()</span></code></a> but returns a
<code class="xref py py-class docutils literal notranslate"><span class="pre">TemplateStream</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>Any</em>)</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#jinja2.environment.TemplateStream" title="jinja2.environment.TemplateStream"><em>TemplateStream</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.Template.render_async">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">render_async</span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Template.render_async" title="Link to this definition">¶</a></dt>
<dd><p>This works similar to <a class="reference internal" href="#jinja2.Template.render" title="jinja2.Template.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">render()</span></code></a> but returns a coroutine
that when awaited returns the entire rendered template string.  This
requires the async feature to be enabled.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">await</span> <span class="n">template</span><span class="o">.</span><span class="n">render_async</span><span class="p">(</span><span class="n">knights</span><span class="o">=</span><span class="s1">&#39;that say nih; asynchronously&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>Any</em>)</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.Template.generate_async">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">generate_async</span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Template.generate_async" title="Link to this definition">¶</a></dt>
<dd><p>An async version of <a class="reference internal" href="#jinja2.Template.generate" title="jinja2.Template.generate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">generate()</span></code></a>.  Works very similarly but
returns an async iterator instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>Any</em>)</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>AsyncGenerator</em>[str, object]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.Template.make_module">
<span class="sig-name descname"><span class="pre">make_module</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shared</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">locals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Template.make_module" title="Link to this definition">¶</a></dt>
<dd><p>This method works like the <a class="reference internal" href="#jinja2.Template.module" title="jinja2.Template.module"><code class="xref py py-attr docutils literal notranslate"><span class="pre">module</span></code></a> attribute when called
without arguments but it will evaluate the template on every call
rather than caching it.  It’s also possible to provide
a dict which is then used as context.  The arguments are the same
as for the <a class="reference internal" href="#jinja2.Template.new_context" title="jinja2.Template.new_context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">new_context()</span></code></a> method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vars</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>shared</strong> (<em>bool</em>)</p></li>
<li><p><strong>locals</strong> (<em>Mapping</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>TemplateModule</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="jinja2.Template.module">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">module</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">TemplateModule</span></em><a class="headerlink" href="#jinja2.Template.module" title="Link to this definition">¶</a></dt>
<dd><p>The template as module.  This is used for imports in the
template runtime but is also useful if one wants to access
exported template variables from the Python layer:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s1">&#39;{% macro foo() %}42{</span><span class="si">% e</span><span class="s1">ndmacro %}23&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">module</span><span class="p">)</span>
<span class="go">&#39;23&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">foo</span><span class="p">()</span> <span class="o">==</span> <span class="sa">u</span><span class="s1">&#39;42&#39;</span>
<span class="go">True</span>
</pre></div>
</div>
<p>This attribute is not available if async mode is enabled.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="jinja2.environment.TemplateStream">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.environment.</span></span><span class="sig-name descname"><span class="pre">TemplateStream</span></span><a class="headerlink" href="#jinja2.environment.TemplateStream" title="Link to this definition">¶</a></dt>
<dd><p>A template stream works pretty much like an ordinary python generator
but it can buffer multiple items to reduce the number of total iterations.
Per default the output is unbuffered which means that for every unbuffered
instruction in the template one string is yielded.</p>
<p>If buffering is enabled with a buffer size of 5, five items are combined
into a new string.  This is mainly useful if you are streaming
big templates to a client via WSGI which flushes after each iteration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>gen</strong> (<em>Iterator</em><em>[</em><em>str</em><em>]</em>)</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="jinja2.environment.TemplateStream.dump">
<span class="sig-name descname"><span class="pre">dump</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'strict'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.environment.TemplateStream.dump" title="Link to this definition">¶</a></dt>
<dd><p>Dump the complete stream into a file or file-like object.
Per default strings are written, if you want to encode
before writing specify an <code class="code docutils literal notranslate"><span class="pre">encoding</span></code>.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Template</span><span class="p">(</span><span class="s1">&#39;Hello {{ name }}!&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="s1">&#39;hello.html&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fp</strong> (<em>str</em><em> | </em><em>IO</em><em>[</em><em>bytes</em><em>]</em>)</p></li>
<li><p><strong>encoding</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>errors</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.environment.TemplateStream.disable_buffering">
<span class="sig-name descname"><span class="pre">disable_buffering</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.environment.TemplateStream.disable_buffering" title="Link to this definition">¶</a></dt>
<dd><p>Disable the output buffering.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.environment.TemplateStream.enable_buffering">
<span class="sig-name descname"><span class="pre">enable_buffering</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.environment.TemplateStream.enable_buffering" title="Link to this definition">¶</a></dt>
<dd><p>Enable buffering.  Buffer <code class="code docutils literal notranslate"><span class="pre">size</span></code> items before yielding them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>size</strong> (<em>int</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="autoescaping">
<h2>Autoescaping<a class="headerlink" href="#autoescaping" title="Link to this heading">¶</a></h2>
<details class="changelog">
<summary>Changelog</summary><div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.4.</span></p>
</div>
</details><p>Jinja now comes with autoescaping support.  As of Jinja 2.9 the
autoescape extension is removed and built-in.  However autoescaping is
not yet enabled by default though this will most likely change in the
future.  It’s recommended to configure a sensible default for
autoescaping.  This makes it possible to enable and disable autoescaping
on a per-template basis (HTML versus text for instance).</p>
<dl class="py function">
<dt class="sig sig-object py" id="jinja2.select_autoescape">
<span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">select_autoescape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">enabled_extensions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">('html',</span> <span class="pre">'htm',</span> <span class="pre">'xml')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">disabled_extensions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_for_string</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.select_autoescape" title="Link to this definition">¶</a></dt>
<dd><p>Intelligently sets the initial value of autoescaping based on the
filename of the template.  This is the recommended way to configure
autoescaping if you do not want to write a custom function yourself.</p>
<p>If you want to enable it for all templates created from strings or
for all templates with <code class="code docutils literal notranslate"><span class="pre">.html</span></code> and <code class="code docutils literal notranslate"><span class="pre">.xml</span></code> extensions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">select_autoescape</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span><span class="n">autoescape</span><span class="o">=</span><span class="n">select_autoescape</span><span class="p">(</span>
    <span class="n">enabled_extensions</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="s1">&#39;xml&#39;</span><span class="p">),</span>
    <span class="n">default_for_string</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">))</span>
</pre></div>
</div>
<p>Example configuration to turn it on at all times except if the template
ends with <code class="code docutils literal notranslate"><span class="pre">.txt</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">select_autoescape</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span><span class="n">autoescape</span><span class="o">=</span><span class="n">select_autoescape</span><span class="p">(</span>
    <span class="n">disabled_extensions</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;txt&#39;</span><span class="p">,),</span>
    <span class="n">default_for_string</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">))</span>
</pre></div>
</div>
<p>The <code class="code docutils literal notranslate"><span class="pre">enabled_extensions</span></code> is an iterable of all the extensions that
autoescaping should be enabled for.  Likewise <code class="code docutils literal notranslate"><span class="pre">disabled_extensions</span></code> is
a list of all templates it should be disabled for.  If a template is
loaded from a string then the default from <code class="code docutils literal notranslate"><span class="pre">default_for_string</span></code> is used.
If nothing matches then the initial value of autoescaping is set to the
value of <code class="code docutils literal notranslate"><span class="pre">default</span></code>.</p>
<p>For security reasons this function operates case insensitive.</p>
<details class="changelog">
<summary>Changelog</summary><div class="versionadded">
<p><span class="versionmodified added">Added in version 2.9.</span></p>
</div>
</details><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>enabled_extensions</strong> (<em>Collection</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>disabled_extensions</strong> (<em>Collection</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>default_for_string</strong> (<em>bool</em>)</p></li>
<li><p><strong>default</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Callable</em>[[str | None], bool]</p>
</dd>
</dl>
</dd></dl>

<p>Here a recommended setup that enables autoescaping for templates ending
in <code class="docutils literal notranslate"><span class="pre">'.html'</span></code>, <code class="docutils literal notranslate"><span class="pre">'.htm'</span></code> and <code class="docutils literal notranslate"><span class="pre">'.xml'</span></code> and disabling it by default
for all other extensions.  You can use the <a class="reference internal" href="#jinja2.select_autoescape" title="jinja2.select_autoescape"><code class="xref py py-func docutils literal notranslate"><span class="pre">select_autoescape()</span></code></a>
function for this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">PackageLoader</span><span class="p">,</span> <span class="n">select_autoescape</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span><span class="n">autoescape</span><span class="o">=</span><span class="n">select_autoescape</span><span class="p">([</span><span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="s1">&#39;htm&#39;</span><span class="p">,</span> <span class="s1">&#39;xml&#39;</span><span class="p">]),</span>
                  <span class="n">loader</span><span class="o">=</span><span class="n">PackageLoader</span><span class="p">(</span><span class="s1">&#39;mypackage&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>The <code class="xref py py-func docutils literal notranslate"><span class="pre">select_autoescape()</span></code> function returns a function that
works roughly like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">autoescape</span><span class="p">(</span><span class="n">template_name</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">template_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">template_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s1">&#39;.html&#39;</span><span class="p">,</span> <span class="s1">&#39;.htm&#39;</span><span class="p">,</span> <span class="s1">&#39;.xml&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>When implementing a guessing autoescape function, make sure you also
accept <code class="code docutils literal notranslate"><span class="pre">None</span></code> as valid template name.  This will be passed when generating
templates from strings.  You should always configure autoescaping as
defaults in the future might change.</p>
<p>Inside the templates the behaviour can be temporarily changed by using
the <code class="code docutils literal notranslate"><span class="pre">autoescape</span></code> block (see <a class="reference internal" href="templates.html#autoescape-overrides"><span class="std std-ref">Autoescape Overrides</span></a>).</p>
</section>
<section id="notes-on-identifiers">
<span id="identifier-naming"></span><h2>Notes on Identifiers<a class="headerlink" href="#notes-on-identifiers" title="Link to this heading">¶</a></h2>
<p>Jinja uses Python naming rules. Valid identifiers can be any combination
of characters accepted by Python.</p>
<p>Filters and tests are looked up in separate namespaces and have slightly
modified identifier syntax.  Filters and tests may contain dots to group
filters and tests by topic.  For example it’s perfectly valid to add a
function into the filter dict and call it <code class="code docutils literal notranslate"><span class="pre">to.str</span></code>.  The regular
expression for filter and test identifiers is
<code class="docutils literal notranslate"><span class="pre">[a-zA-Z_][a-zA-Z0-9_]*(\.[a-zA-Z_][a-zA-Z0-9_]*)*</span></code>.</p>
</section>
<section id="undefined-types">
<h2>Undefined Types<a class="headerlink" href="#undefined-types" title="Link to this heading">¶</a></h2>
<p>These classes can be used as undefined types.  The <a class="reference internal" href="#jinja2.Environment" title="jinja2.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code></a>
constructor takes an <code class="code docutils literal notranslate"><span class="pre">undefined</span></code> parameter that can be one of those classes
or a custom subclass of <a class="reference internal" href="#jinja2.Undefined" title="jinja2.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a>.  Whenever the template engine is
unable to look up a name or access an attribute one of those objects is
created and returned.  Some operations on undefined values are then allowed,
others fail.</p>
<p>The closest to regular Python behavior is the <a class="reference internal" href="#jinja2.StrictUndefined" title="jinja2.StrictUndefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">StrictUndefined</span></code></a> which
disallows all operations beside testing if it’s an undefined object.</p>
<dl class="py class">
<dt class="sig sig-object py" id="jinja2.Undefined">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">Undefined</span></span><a class="headerlink" href="#jinja2.Undefined" title="Link to this definition">¶</a></dt>
<dd><p>The default undefined type. This can be printed, iterated, and treated as
a boolean. Any other operation will raise an <a class="reference internal" href="#jinja2.UndefinedError" title="jinja2.UndefinedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UndefinedError</span></code></a>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span> <span class="o">=</span> <span class="n">Undefined</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="go">&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="ow">not</span> <span class="n">foo</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span> <span class="o">+</span> <span class="mi">42</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="w">  </span><span class="c">...</span>
<span class="gr">jinja2.exceptions.UndefinedError</span>: <span class="n">&#39;foo&#39; is undefined</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hint</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>obj</strong> (<em>Any</em>)</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>exc</strong> (<em>Type</em><em>[</em><a class="reference internal" href="#jinja2.TemplateRuntimeError" title="jinja2.exceptions.TemplateRuntimeError"><em>TemplateRuntimeError</em></a><em>]</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.Undefined._undefined_hint">
<span class="sig-name descname"><span class="pre">_undefined_hint</span></span><a class="headerlink" href="#jinja2.Undefined._undefined_hint" title="Link to this definition">¶</a></dt>
<dd><p>Either <code class="code docutils literal notranslate"><span class="pre">None</span></code> or a string with the error message for the
undefined object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.Undefined._undefined_obj">
<span class="sig-name descname"><span class="pre">_undefined_obj</span></span><a class="headerlink" href="#jinja2.Undefined._undefined_obj" title="Link to this definition">¶</a></dt>
<dd><p>Either <code class="code docutils literal notranslate"><span class="pre">None</span></code> or the owner object that caused the undefined object
to be created (for example because an attribute does not exist).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.Undefined._undefined_name">
<span class="sig-name descname"><span class="pre">_undefined_name</span></span><a class="headerlink" href="#jinja2.Undefined._undefined_name" title="Link to this definition">¶</a></dt>
<dd><p>The name for the undefined variable / attribute or just <code class="code docutils literal notranslate"><span class="pre">None</span></code>
if no such information exists.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.Undefined._undefined_exception">
<span class="sig-name descname"><span class="pre">_undefined_exception</span></span><a class="headerlink" href="#jinja2.Undefined._undefined_exception" title="Link to this definition">¶</a></dt>
<dd><p>The exception that the undefined object wants to raise.  This
is usually one of <a class="reference internal" href="#jinja2.UndefinedError" title="jinja2.UndefinedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UndefinedError</span></code></a> or <code class="xref py py-exc docutils literal notranslate"><span class="pre">SecurityError</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.Undefined._fail_with_undefined_error">
<span class="sig-name descname"><span class="pre">_fail_with_undefined_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">\*args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">\**kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Undefined._fail_with_undefined_error" title="Link to this definition">¶</a></dt>
<dd><p>When called with any arguments this method raises
<a class="reference internal" href="#jinja2.Undefined._undefined_exception" title="jinja2.Undefined._undefined_exception"><code class="xref py py-attr docutils literal notranslate"><span class="pre">_undefined_exception</span></code></a> with an error message generated
from the undefined hints stored on the undefined object.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="jinja2.ChainableUndefined">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">ChainableUndefined</span></span><a class="headerlink" href="#jinja2.ChainableUndefined" title="Link to this definition">¶</a></dt>
<dd><p>An undefined that is chainable, where both <code class="docutils literal notranslate"><span class="pre">__getattr__</span></code> and
<code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> return itself rather than raising an
<a class="reference internal" href="#jinja2.UndefinedError" title="jinja2.UndefinedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UndefinedError</span></code></a>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span> <span class="o">=</span> <span class="n">ChainableUndefined</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="p">[</span><span class="s1">&#39;baz&#39;</span><span class="p">])</span>
<span class="go">&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="p">[</span><span class="s1">&#39;baz&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">42</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="w">  </span><span class="c">...</span>
<span class="gr">jinja2.exceptions.UndefinedError</span>: <span class="n">&#39;foo&#39; is undefined</span>
</pre></div>
</div>
<details class="changelog">
<summary>Changelog</summary><div class="versionadded">
<p><span class="versionmodified added">Added in version 2.11.0.</span></p>
</div>
</details><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hint</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>obj</strong> (<em>Any</em>)</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>exc</strong> (<em>Type</em><em>[</em><a class="reference internal" href="#jinja2.TemplateRuntimeError" title="jinja2.exceptions.TemplateRuntimeError"><em>TemplateRuntimeError</em></a><em>]</em>)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="jinja2.DebugUndefined">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">DebugUndefined</span></span><a class="headerlink" href="#jinja2.DebugUndefined" title="Link to this definition">¶</a></dt>
<dd><p>An undefined that returns the debug info when printed.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span> <span class="o">=</span> <span class="n">DebugUndefined</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="go">&#39;{{ foo }}&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="ow">not</span> <span class="n">foo</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span> <span class="o">+</span> <span class="mi">42</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="w">  </span><span class="c">...</span>
<span class="gr">jinja2.exceptions.UndefinedError</span>: <span class="n">&#39;foo&#39; is undefined</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hint</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>obj</strong> (<em>Any</em>)</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>exc</strong> (<em>Type</em><em>[</em><a class="reference internal" href="#jinja2.TemplateRuntimeError" title="jinja2.exceptions.TemplateRuntimeError"><em>TemplateRuntimeError</em></a><em>]</em>)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="jinja2.StrictUndefined">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">StrictUndefined</span></span><a class="headerlink" href="#jinja2.StrictUndefined" title="Link to this definition">¶</a></dt>
<dd><p>An undefined that barks on print and iteration as well as boolean
tests and all kinds of comparisons.  In other words: you can do nothing
with it except checking if it’s defined using the <code class="code docutils literal notranslate"><span class="pre">defined</span></code> test.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span> <span class="o">=</span> <span class="n">StrictUndefined</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="w">  </span><span class="c">...</span>
<span class="gr">jinja2.exceptions.UndefinedError</span>: <span class="n">&#39;foo&#39; is undefined</span>
<span class="gp">&gt;&gt;&gt; </span><span class="ow">not</span> <span class="n">foo</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="w">  </span><span class="c">...</span>
<span class="gr">jinja2.exceptions.UndefinedError</span>: <span class="n">&#39;foo&#39; is undefined</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span> <span class="o">+</span> <span class="mi">42</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="w">  </span><span class="c">...</span>
<span class="gr">jinja2.exceptions.UndefinedError</span>: <span class="n">&#39;foo&#39; is undefined</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hint</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>obj</strong> (<em>Any</em>)</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>exc</strong> (<em>Type</em><em>[</em><a class="reference internal" href="#jinja2.TemplateRuntimeError" title="jinja2.exceptions.TemplateRuntimeError"><em>TemplateRuntimeError</em></a><em>]</em>)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p>There is also a factory function that can decorate undefined objects to
implement logging on failures:</p>
<dl class="py function">
<dt class="sig sig-object py" id="jinja2.make_logging_undefined">
<span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">make_logging_undefined</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">Undefined</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.make_logging_undefined" title="Link to this definition">¶</a></dt>
<dd><p>Given a logger object this returns a new undefined class that will
log certain failures.  It will log iterations and printing.  If no
logger is given a default logger is created.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">LoggingUndefined</span> <span class="o">=</span> <span class="n">make_logging_undefined</span><span class="p">(</span>
    <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">,</span>
    <span class="n">base</span><span class="o">=</span><span class="n">Undefined</span>
<span class="p">)</span>
</pre></div>
</div>
<details class="changelog">
<summary>Changelog</summary><div class="versionadded">
<p><span class="versionmodified added">Added in version 2.8.</span></p>
</div>
</details><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>logger</strong> (<em>logging.Logger</em><em> | </em><em>None</em>) – the logger to use.  If not provided, a default logger
is created.</p></li>
<li><p><strong>base</strong> (<em>Type</em><em>[</em><a class="reference internal" href="#jinja2.Undefined" title="jinja2.runtime.Undefined"><em>Undefined</em></a><em>]</em>) – the base class to add logging functionality to.  This
defaults to <a class="reference internal" href="#jinja2.Undefined" title="jinja2.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Type</em>[<a class="reference internal" href="#jinja2.Undefined" title="jinja2.runtime.Undefined"><em>Undefined</em></a>]</p>
</dd>
</dl>
</dd></dl>

<p>Undefined objects are created by calling <code class="xref py py-attr docutils literal notranslate"><span class="pre">undefined</span></code>.</p>
<div class="admonition-implementation admonition">
<p class="admonition-title">Implementation</p>
<p><a class="reference internal" href="#jinja2.Undefined" title="jinja2.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a> is implemented by overriding the special
<code class="docutils literal notranslate"><span class="pre">__underscore__</span></code> methods. For example the default
<a class="reference internal" href="#jinja2.Undefined" title="jinja2.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a> class implements <code class="docutils literal notranslate"><span class="pre">__str__</span></code> to returns an empty
string, while <code class="docutils literal notranslate"><span class="pre">__int__</span></code> and others fail with an exception. To
allow conversion to int by returning <code class="docutils literal notranslate"><span class="pre">0</span></code> you can implement your
own subclass.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">NullUndefined</span><span class="p">(</span><span class="n">Undefined</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__int__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__float__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mf">0.0</span>
</pre></div>
</div>
<p>To disallow a method, override it and raise
<a class="reference internal" href="#jinja2.Undefined._undefined_exception" title="jinja2.Undefined._undefined_exception"><code class="xref py py-attr docutils literal notranslate"><span class="pre">_undefined_exception</span></code></a>.  Because this is very
common there is the helper method
<a class="reference internal" href="#jinja2.Undefined._fail_with_undefined_error" title="jinja2.Undefined._fail_with_undefined_error"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_fail_with_undefined_error()</span></code></a> that raises the error
with the correct information. Here’s a class that works like the
regular <a class="reference internal" href="#jinja2.Undefined" title="jinja2.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a> but fails on iteration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">NonIterableUndefined</span><span class="p">(</span><span class="n">Undefined</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fail_with_undefined_error</span><span class="p">()</span>
</pre></div>
</div>
</div>
</section>
<section id="the-context">
<h2>The Context<a class="headerlink" href="#the-context" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="jinja2.runtime.Context">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.runtime.</span></span><span class="sig-name descname"><span class="pre">Context</span></span><a class="headerlink" href="#jinja2.runtime.Context" title="Link to this definition">¶</a></dt>
<dd><p>The template context holds the variables of a template.  It stores the
values passed to the template and also the names the template exports.
Creating instances is neither supported nor useful as it’s created
automatically at various stages of the template evaluation and should not
be created by hand.</p>
<p>The context is immutable.  Modifications on <a class="reference internal" href="#jinja2.runtime.Context.parent" title="jinja2.runtime.Context.parent"><code class="xref py py-attr docutils literal notranslate"><span class="pre">parent</span></code></a> <strong>must not</strong>
happen and modifications on <a class="reference internal" href="#jinja2.runtime.Context.vars" title="jinja2.runtime.Context.vars"><code class="xref py py-attr docutils literal notranslate"><span class="pre">vars</span></code></a> are allowed from generated
template code only.  Template filters and global functions marked as
<code class="xref py py-func docutils literal notranslate"><span class="pre">pass_context()</span></code> get the active context passed as first argument
and are allowed to access the context read-only.</p>
<p>The template context supports read only dict operations (<code class="code docutils literal notranslate"><span class="pre">get</span></code>,
<code class="code docutils literal notranslate"><span class="pre">keys</span></code>, <code class="code docutils literal notranslate"><span class="pre">values</span></code>, <code class="code docutils literal notranslate"><span class="pre">items</span></code>, <code class="code docutils literal notranslate"><span class="pre">iterkeys</span></code>, <code class="code docutils literal notranslate"><span class="pre">itervalues</span></code>, <code class="code docutils literal notranslate"><span class="pre">iteritems</span></code>,
<code class="code docutils literal notranslate"><span class="pre">__getitem__</span></code>, <code class="code docutils literal notranslate"><span class="pre">__contains__</span></code>).  Additionally there is a <a class="reference internal" href="#jinja2.runtime.Context.resolve" title="jinja2.runtime.Context.resolve"><code class="xref py py-meth docutils literal notranslate"><span class="pre">resolve()</span></code></a>
method that doesn’t fail with a <code class="code docutils literal notranslate"><span class="pre">KeyError</span></code> but returns an
<a class="reference internal" href="#jinja2.Undefined" title="jinja2.runtime.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a> object for missing variables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#jinja2.Environment" title="jinja2.Environment"><em>Environment</em></a>)</p></li>
<li><p><strong>parent</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>)</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>blocks</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Callable</em><em>[</em><em>[</em><a class="reference internal" href="#jinja2.runtime.Context" title="jinja2.runtime.Context"><em>Context</em></a><em>]</em><em>, </em><em>Iterator</em><em>[</em><em>str</em><em>]</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>globals</strong> (<em>MutableMapping</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.runtime.Context.parent">
<span class="sig-name descname"><span class="pre">parent</span></span><a class="headerlink" href="#jinja2.runtime.Context.parent" title="Link to this definition">¶</a></dt>
<dd><p>A dict of read only, global variables the template looks up.  These
can either come from another <a class="reference internal" href="#jinja2.runtime.Context" title="jinja2.runtime.Context"><code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code></a>, from the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">Environment.globals</span></code> or <code class="xref py py-attr docutils literal notranslate"><span class="pre">Template.globals</span></code> or points
to a dict created by combining the globals with the variables
passed to the render function.  It must not be altered.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.runtime.Context.vars">
<span class="sig-name descname"><span class="pre">vars</span></span><a class="headerlink" href="#jinja2.runtime.Context.vars" title="Link to this definition">¶</a></dt>
<dd><p>The template local variables.  This list contains environment and
context functions from the <a class="reference internal" href="#jinja2.runtime.Context.parent" title="jinja2.runtime.Context.parent"><code class="xref py py-attr docutils literal notranslate"><span class="pre">parent</span></code></a> scope as well as local
modifications and exported variables from the template.  The template
will modify this dict during template evaluation but filters and
context functions are not allowed to modify it.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.runtime.Context.environment">
<span class="sig-name descname"><span class="pre">environment</span></span><a class="headerlink" href="#jinja2.runtime.Context.environment" title="Link to this definition">¶</a></dt>
<dd><p>The environment that loaded the template.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.runtime.Context.exported_vars">
<span class="sig-name descname"><span class="pre">exported_vars</span></span><a class="headerlink" href="#jinja2.runtime.Context.exported_vars" title="Link to this definition">¶</a></dt>
<dd><p>This set contains all the names the template exports.  The values for
the names are in the <a class="reference internal" href="#jinja2.runtime.Context.vars" title="jinja2.runtime.Context.vars"><code class="xref py py-attr docutils literal notranslate"><span class="pre">vars</span></code></a> dict.  In order to get a copy of the
exported variables as dict, <a class="reference internal" href="#jinja2.runtime.Context.get_exported" title="jinja2.runtime.Context.get_exported"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_exported()</span></code></a> can be used.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.runtime.Context.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#jinja2.runtime.Context.name" title="Link to this definition">¶</a></dt>
<dd><p>The load name of the template owning this context.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.runtime.Context.blocks">
<span class="sig-name descname"><span class="pre">blocks</span></span><a class="headerlink" href="#jinja2.runtime.Context.blocks" title="Link to this definition">¶</a></dt>
<dd><p>A dict with the current mapping of blocks in the template.  The keys
in this dict are the names of the blocks, and the values a list of
blocks registered.  The last item in each list is the current active
block (latest in the inheritance chain).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.runtime.Context.eval_ctx">
<span class="sig-name descname"><span class="pre">eval_ctx</span></span><a class="headerlink" href="#jinja2.runtime.Context.eval_ctx" title="Link to this definition">¶</a></dt>
<dd><p>The current <a class="reference internal" href="#eval-context"><span class="std std-ref">Evaluation Context</span></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.runtime.Context.call">
<span class="sig-name descname"><span class="pre">call</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">\*args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">\**kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.runtime.Context.call" title="Link to this definition">¶</a></dt>
<dd><p>Call the callable with the arguments and keyword arguments
provided but inject the active context or environment as first
argument if the callable has <code class="xref py py-func docutils literal notranslate"><span class="pre">pass_context()</span></code> or
<code class="xref py py-func docutils literal notranslate"><span class="pre">pass_environment()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_Context__obj</strong> (<em>Callable</em><em>[</em><em>[</em><em>...</em><em>]</em><em>, </em><em>Any</em><em>]</em>)</p></li>
<li><p><strong>args</strong> (<em>Any</em>)</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Any</em> | <a class="reference internal" href="#jinja2.Undefined" title="jinja2.runtime.Undefined"><em>Undefined</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.runtime.Context.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.runtime.Context.get" title="Link to this definition">¶</a></dt>
<dd><p>Look up a variable by name, or return a default if the key is
not found.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – The variable name to look up.</p></li>
<li><p><strong>default</strong> (<em>Any</em>) – The value to return if the key is not found.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Any</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.runtime.Context.resolve">
<span class="sig-name descname"><span class="pre">resolve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.runtime.Context.resolve" title="Link to this definition">¶</a></dt>
<dd><p>Look up a variable by name, or return an <a class="reference internal" href="#jinja2.Undefined" title="jinja2.runtime.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a>
object if the key is not found.</p>
<p>If you need to add custom behavior, override
<a class="reference internal" href="#jinja2.runtime.Context.resolve_or_missing" title="jinja2.runtime.Context.resolve_or_missing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">resolve_or_missing()</span></code></a>, not this method. The various lookup
functions use that method, not this one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str</em>) – The variable name to look up.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Any</em> | <a class="reference internal" href="#jinja2.Undefined" title="jinja2.runtime.Undefined"><em>Undefined</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.runtime.Context.resolve_or_missing">
<span class="sig-name descname"><span class="pre">resolve_or_missing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.runtime.Context.resolve_or_missing" title="Link to this definition">¶</a></dt>
<dd><p>Look up a variable by name, or return a <code class="docutils literal notranslate"><span class="pre">missing</span></code> sentinel
if the key is not found.</p>
<p>Override this method to add custom lookup behavior.
<a class="reference internal" href="#jinja2.runtime.Context.resolve" title="jinja2.runtime.Context.resolve"><code class="xref py py-meth docutils literal notranslate"><span class="pre">resolve()</span></code></a>, <a class="reference internal" href="#jinja2.runtime.Context.get" title="jinja2.runtime.Context.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code></a>, and <code class="xref py py-meth docutils literal notranslate"><span class="pre">__getitem__()</span></code> use this
method. Don’t call this method directly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str</em>) – The variable name to look up.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Any</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.runtime.Context.get_exported">
<span class="sig-name descname"><span class="pre">get_exported</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.runtime.Context.get_exported" title="Link to this definition">¶</a></dt>
<dd><p>Get a new dict with the exported variables.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Dict</em>[str, <em>Any</em>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.runtime.Context.get_all">
<span class="sig-name descname"><span class="pre">get_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.runtime.Context.get_all" title="Link to this definition">¶</a></dt>
<dd><p>Return the complete context as dict including the exported
variables.  For optimizations reasons this might not return an
actual copy so be careful with using it.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Dict</em>[str, <em>Any</em>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<p>The context is immutable, it prevents modifications, and if it is
modified somehow despite that those changes may not show up. For
performance, Jinja does not use the context as data storage for, only as
a primary data source. Variables that the template does not define are
looked up in the context, but variables the template does define are
stored locally.</p>
<p>Instead of modifying the context directly, a function should return
a value that can be assigned to a variable within the template itself.</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">set</span> <span class="nv">comments</span> <span class="o">=</span> <span class="nv">get_latest_comments</span><span class="o">()</span> <span class="cp">%}</span>
</pre></div>
</div>
</section>
<section id="loaders">
<span id="id1"></span><h2>Loaders<a class="headerlink" href="#loaders" title="Link to this heading">¶</a></h2>
<p>Loaders are responsible for loading templates from a resource such as the
file system.  The environment will keep the compiled modules in memory like
Python’s <code class="code docutils literal notranslate"><span class="pre">sys.modules</span></code>.  Unlike <code class="code docutils literal notranslate"><span class="pre">sys.modules</span></code> however this cache is limited in
size by default and templates are automatically reloaded.
All loaders are subclasses of <a class="reference internal" href="#jinja2.BaseLoader" title="jinja2.BaseLoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseLoader</span></code></a>.  If you want to create your
own loader, subclass <a class="reference internal" href="#jinja2.BaseLoader" title="jinja2.BaseLoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseLoader</span></code></a> and override <code class="code docutils literal notranslate"><span class="pre">get_source</span></code>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="jinja2.BaseLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">BaseLoader</span></span><a class="headerlink" href="#jinja2.BaseLoader" title="Link to this definition">¶</a></dt>
<dd><p>Baseclass for all loaders.  Subclass this and override <code class="code docutils literal notranslate"><span class="pre">get_source</span></code> to
implement a custom loading mechanism.  The environment provides a
<code class="code docutils literal notranslate"><span class="pre">get_template</span></code> method that calls the loader’s <code class="code docutils literal notranslate"><span class="pre">load</span></code> method to get the
<a class="reference internal" href="#jinja2.Template" title="jinja2.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">Template</span></code></a> object.</p>
<p>A very basic example for a loader that looks up templates on the file
system could look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">BaseLoader</span><span class="p">,</span> <span class="n">TemplateNotFound</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">join</span><span class="p">,</span> <span class="n">exists</span><span class="p">,</span> <span class="n">getmtime</span>

<span class="k">class</span> <span class="nc">MyLoader</span><span class="p">(</span><span class="n">BaseLoader</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">path</span>

    <span class="k">def</span> <span class="nf">get_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">environment</span><span class="p">,</span> <span class="n">template</span><span class="p">):</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">template</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">TemplateNotFound</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
        <span class="n">mtime</span> <span class="o">=</span> <span class="n">getmtime</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">source</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">source</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">mtime</span> <span class="o">==</span> <span class="n">getmtime</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="jinja2.BaseLoader.get_source">
<span class="sig-name descname"><span class="pre">get_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">environment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.BaseLoader.get_source" title="Link to this definition">¶</a></dt>
<dd><p>Get the template source, filename and reload helper for a template.
It’s passed the environment and template name and has to return a
tuple in the form <code class="docutils literal notranslate"><span class="pre">(source,</span> <span class="pre">filename,</span> <span class="pre">uptodate)</span></code> or raise a
<code class="code docutils literal notranslate"><span class="pre">TemplateNotFound</span></code> error if it can’t locate the template.</p>
<p>The source part of the returned tuple must be the source of the
template as a string. The filename should be the name of the
file on the filesystem if it was loaded from there, otherwise
<code class="docutils literal notranslate"><span class="pre">None</span></code>. The filename is used by Python for the tracebacks
if no loader extension is used.</p>
<p>The last item in the tuple is the <code class="code docutils literal notranslate"><span class="pre">uptodate</span></code> function.  If auto
reloading is enabled it’s always called to check if the template
changed.  No arguments are passed so the function must store the
old state somewhere (for example in a closure).  If it returns <code class="code docutils literal notranslate"><span class="pre">False</span></code>
the template will be reloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#jinja2.Environment" title="jinja2.Environment"><em>Environment</em></a>)</p></li>
<li><p><strong>template</strong> (<em>str</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Tuple</em>[str, str | None, <em>Callable</em>[[], bool] | None]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.BaseLoader.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">environment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">globals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.BaseLoader.load" title="Link to this definition">¶</a></dt>
<dd><p>Loads a template.  This method looks up the template in the cache
or loads one by calling <a class="reference internal" href="#jinja2.BaseLoader.get_source" title="jinja2.BaseLoader.get_source"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_source()</span></code></a>.  Subclasses should not
override this method as loaders working on collections of other
loaders (such as <a class="reference internal" href="#jinja2.PrefixLoader" title="jinja2.PrefixLoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrefixLoader</span></code></a> or <a class="reference internal" href="#jinja2.ChoiceLoader" title="jinja2.ChoiceLoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceLoader</span></code></a>)
will not call this method but <code class="code docutils literal notranslate"><span class="pre">get_source</span></code> directly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#jinja2.Environment" title="jinja2.Environment"><em>Environment</em></a>)</p></li>
<li><p><strong>name</strong> (<em>str</em>)</p></li>
<li><p><strong>globals</strong> (<em>MutableMapping</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#jinja2.Template" title="jinja2.Template">Template</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<p>Here a list of the builtin loaders Jinja provides:</p>
<dl class="py class">
<dt class="sig sig-object py" id="jinja2.FileSystemLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">FileSystemLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">searchpath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'utf-8'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">followlinks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.FileSystemLoader" title="Link to this definition">¶</a></dt>
<dd><p>Load templates from a directory in the file system.</p>
<p>The path can be relative or absolute. Relative paths are relative to
the current working directory.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">loader</span> <span class="o">=</span> <span class="n">FileSystemLoader</span><span class="p">(</span><span class="s2">&quot;templates&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>A list of paths can be given. The directories will be searched in
order, stopping at the first matching template.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">loader</span> <span class="o">=</span> <span class="n">FileSystemLoader</span><span class="p">([</span><span class="s2">&quot;/override/templates&quot;</span><span class="p">,</span> <span class="s2">&quot;/default/templates&quot;</span><span class="p">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>searchpath</strong> (<em>str</em><em> | </em><em>os.PathLike</em><em>[</em><em>str</em><em>] </em><em>| </em><em>Sequence</em><em>[</em><em>str</em><em> | </em><em>os.PathLike</em><em>[</em><em>str</em><em>]</em><em>]</em>) – A path, or list of paths, to the directory that
contains the templates.</p></li>
<li><p><strong>encoding</strong> (<em>str</em>) – Use this encoding to read the text from template
files.</p></li>
<li><p><strong>followlinks</strong> (<em>bool</em>) – Follow symbolic links in the path.</p></li>
</ul>
</dd>
</dl>
<details class="changelog">
<summary>Changelog</summary><div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.8: </span>Added the <code class="docutils literal notranslate"><span class="pre">followlinks</span></code> parameter.</p>
</div>
</details></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="jinja2.PackageLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">PackageLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">package_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">package_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'templates'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'utf-8'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.PackageLoader" title="Link to this definition">¶</a></dt>
<dd><p>Load templates from a directory in a Python package.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>package_name</strong> (<em>str</em>) – Import name of the package that contains the
template directory.</p></li>
<li><p><strong>package_path</strong> (<em>str</em>) – Directory within the imported package that
contains the templates.</p></li>
<li><p><strong>encoding</strong> (<em>str</em>) – Encoding of template files.</p></li>
</ul>
</dd>
</dl>
<p>The following example looks up templates in the <code class="docutils literal notranslate"><span class="pre">pages</span></code> directory
within the <code class="docutils literal notranslate"><span class="pre">project.ui</span></code> package.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">loader</span> <span class="o">=</span> <span class="n">PackageLoader</span><span class="p">(</span><span class="s2">&quot;project.ui&quot;</span><span class="p">,</span> <span class="s2">&quot;pages&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Only packages installed as directories (standard pip behavior) or
zip/egg files (less common) are supported. The Python API for
introspecting data in packages is too limited to support other
installation methods the way this loader requires.</p>
<p>There is limited support for <span class="target" id="index-0"></span><a class="pep reference external" href="https://peps.python.org/pep-0420/"><strong>PEP 420</strong></a> namespace packages. The
template directory is assumed to only be in one namespace
contributor. Zip files contributing to a namespace are not
supported.</p>
<details class="changelog">
<summary>Changelog</summary><div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 3.0: </span>No longer uses <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> as a dependency.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 3.0: </span>Limited PEP 420 namespace package support.</p>
</div>
</details></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="jinja2.DictLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">DictLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mapping</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.DictLoader" title="Link to this definition">¶</a></dt>
<dd><p>Loads a template from a Python dict mapping template names to
template source.  This loader is useful for unittesting:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">loader</span> <span class="o">=</span> <span class="n">DictLoader</span><span class="p">({</span><span class="s1">&#39;index.html&#39;</span><span class="p">:</span> <span class="s1">&#39;source here&#39;</span><span class="p">})</span>
</pre></div>
</div>
<p>Because auto reloading is rarely useful this is disabled by default.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mapping</strong> (<em>Mapping</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="jinja2.FunctionLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">FunctionLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">load_func</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.FunctionLoader" title="Link to this definition">¶</a></dt>
<dd><p>A loader that is passed a function which does the loading.  The
function receives the name of the template and has to return either
a string with the template source, a tuple in the form <code class="docutils literal notranslate"><span class="pre">(source,</span>
<span class="pre">filename,</span> <span class="pre">uptodatefunc)</span></code> or <code class="code docutils literal notranslate"><span class="pre">None</span></code> if the template does not exist.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">load_template</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;index.html&#39;</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="s1">&#39;...&#39;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">loader</span> <span class="o">=</span> <span class="n">FunctionLoader</span><span class="p">(</span><span class="n">load_template</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="code docutils literal notranslate"><span class="pre">uptodatefunc</span></code> is a function that is called if autoreload is enabled
and has to return <code class="code docutils literal notranslate"><span class="pre">True</span></code> if the template is still up to date.  For more
details have a look at <a class="reference internal" href="#jinja2.BaseLoader.get_source" title="jinja2.BaseLoader.get_source"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseLoader.get_source()</span></code></a> which has the same
return value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>load_func</strong> (<em>Callable</em><em>[</em><em>[</em><em>str</em><em>]</em><em>, </em><em>str</em><em> | </em><em>Tuple</em><em>[</em><em>str</em><em>, </em><em>str</em><em> | </em><em>None</em><em>, </em><em>Callable</em><em>[</em><em>[</em><em>]</em><em>, </em><em>bool</em><em>] </em><em>| </em><em>None</em><em>] </em><em>| </em><em>None</em><em>]</em>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="jinja2.PrefixLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">PrefixLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mapping</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delimiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.PrefixLoader" title="Link to this definition">¶</a></dt>
<dd><p>A loader that is passed a dict of loaders where each loader is bound
to a prefix.  The prefix is delimited from the template by a slash per
default, which can be changed by setting the <code class="code docutils literal notranslate"><span class="pre">delimiter</span></code> argument to
something else:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">loader</span> <span class="o">=</span> <span class="n">PrefixLoader</span><span class="p">({</span>
    <span class="s1">&#39;app1&#39;</span><span class="p">:</span>     <span class="n">PackageLoader</span><span class="p">(</span><span class="s1">&#39;mypackage.app1&#39;</span><span class="p">),</span>
    <span class="s1">&#39;app2&#39;</span><span class="p">:</span>     <span class="n">PackageLoader</span><span class="p">(</span><span class="s1">&#39;mypackage.app2&#39;</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
<p>By loading <code class="docutils literal notranslate"><span class="pre">'app1/index.html'</span></code> the file from the app1 package is loaded,
by loading <code class="docutils literal notranslate"><span class="pre">'app2/index.html'</span></code> the file from the second.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mapping</strong> (<em>Mapping</em><em>[</em><em>str</em><em>, </em><a class="reference internal" href="#jinja2.BaseLoader" title="jinja2.loaders.BaseLoader"><em>BaseLoader</em></a><em>]</em>)</p></li>
<li><p><strong>delimiter</strong> (<em>str</em>)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="jinja2.ChoiceLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">ChoiceLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">loaders</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.ChoiceLoader" title="Link to this definition">¶</a></dt>
<dd><p>This loader works like the <code class="code docutils literal notranslate"><span class="pre">PrefixLoader</span></code> just that no prefix is
specified.  If a template could not be found by one loader the next one
is tried.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">loader</span> <span class="o">=</span> <span class="n">ChoiceLoader</span><span class="p">([</span>
<span class="gp">... </span>    <span class="n">FileSystemLoader</span><span class="p">(</span><span class="s1">&#39;/path/to/user/templates&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">FileSystemLoader</span><span class="p">(</span><span class="s1">&#39;/path/to/system/templates&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="p">])</span>
</pre></div>
</div>
<p>This is useful if you want to allow users to override builtin templates
from a different location.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>loaders</strong> (<em>Sequence</em><em>[</em><a class="reference internal" href="#jinja2.BaseLoader" title="jinja2.loaders.BaseLoader"><em>BaseLoader</em></a><em>]</em>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="jinja2.ModuleLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">ModuleLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.ModuleLoader" title="Link to this definition">¶</a></dt>
<dd><p>This loader loads templates from precompiled templates.</p>
<p>Example usage:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">loader</span> <span class="o">=</span> <span class="n">ModuleLoader</span><span class="p">(</span><span class="s1">&#39;/path/to/compiled/templates&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Templates can be precompiled with <a class="reference internal" href="#jinja2.Environment.compile_templates" title="jinja2.Environment.compile_templates"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Environment.compile_templates()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em><em> | </em><em>os.PathLike</em><em>[</em><em>str</em><em>] </em><em>| </em><em>Sequence</em><em>[</em><em>str</em><em> | </em><em>os.PathLike</em><em>[</em><em>str</em><em>]</em><em>]</em>)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="bytecode-cache">
<span id="id2"></span><h2>Bytecode Cache<a class="headerlink" href="#bytecode-cache" title="Link to this heading">¶</a></h2>
<p>Jinja 2.1 and higher support external bytecode caching.  Bytecode caches make
it possible to store the generated bytecode on the file system or a different
location to avoid parsing the templates on first use.</p>
<p>This is especially useful if you have a web application that is initialized on
the first request and Jinja compiles many templates at once which slows down
the application.</p>
<p>To use a bytecode cache, instantiate it and pass it to the <a class="reference internal" href="#jinja2.Environment" title="jinja2.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code></a>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="jinja2.BytecodeCache">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">BytecodeCache</span></span><a class="headerlink" href="#jinja2.BytecodeCache" title="Link to this definition">¶</a></dt>
<dd><p>To implement your own bytecode cache you have to subclass this class
and override <a class="reference internal" href="#jinja2.BytecodeCache.load_bytecode" title="jinja2.BytecodeCache.load_bytecode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_bytecode()</span></code></a> and <a class="reference internal" href="#jinja2.BytecodeCache.dump_bytecode" title="jinja2.BytecodeCache.dump_bytecode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dump_bytecode()</span></code></a>.  Both of
these methods are passed a <a class="reference internal" href="#jinja2.bccache.Bucket" title="jinja2.bccache.Bucket"><code class="xref py py-class docutils literal notranslate"><span class="pre">Bucket</span></code></a>.</p>
<p>A very basic bytecode cache that saves the bytecode on the file system:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">path</span>

<span class="k">class</span> <span class="nc">MyCache</span><span class="p">(</span><span class="n">BytecodeCache</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">directory</span> <span class="o">=</span> <span class="n">directory</span>

    <span class="k">def</span> <span class="nf">load_bytecode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bucket</span><span class="p">):</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="p">,</span> <span class="n">bucket</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">bucket</span><span class="o">.</span><span class="n">load_bytecode</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">dump_bytecode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bucket</span><span class="p">):</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="p">,</span> <span class="n">bucket</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">bucket</span><span class="o">.</span><span class="n">write_bytecode</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>A more advanced version of a filesystem based bytecode cache is part of
Jinja.</p>
<dl class="py method">
<dt class="sig sig-object py" id="jinja2.BytecodeCache.load_bytecode">
<span class="sig-name descname"><span class="pre">load_bytecode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.BytecodeCache.load_bytecode" title="Link to this definition">¶</a></dt>
<dd><p>Subclasses have to override this method to load bytecode into a
bucket.  If they are not able to find code in the cache for the
bucket, it must not do anything.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>bucket</strong> (<a class="reference internal" href="#jinja2.bccache.Bucket" title="jinja2.bccache.Bucket"><em>Bucket</em></a>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.BytecodeCache.dump_bytecode">
<span class="sig-name descname"><span class="pre">dump_bytecode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.BytecodeCache.dump_bytecode" title="Link to this definition">¶</a></dt>
<dd><p>Subclasses have to override this method to write the bytecode
from a bucket back to the cache.  If it unable to do so it must not
fail silently but raise an exception.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>bucket</strong> (<a class="reference internal" href="#jinja2.bccache.Bucket" title="jinja2.bccache.Bucket"><em>Bucket</em></a>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.BytecodeCache.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.BytecodeCache.clear" title="Link to this definition">¶</a></dt>
<dd><p>Clears the cache.  This method is not used by Jinja but should be
implemented to allow applications to clear the bytecode cache used
by a particular environment.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="jinja2.bccache.Bucket">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.bccache.</span></span><span class="sig-name descname"><span class="pre">Bucket</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">environment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checksum</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.bccache.Bucket" title="Link to this definition">¶</a></dt>
<dd><p>Buckets are used to store the bytecode for one template.  It’s created
and initialized by the bytecode cache and passed to the loading functions.</p>
<p>The buckets get an internal checksum from the cache assigned and use this
to automatically reject outdated cache material.  Individual bytecode
cache subclasses don’t have to care about cache invalidation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#jinja2.Environment" title="jinja2.Environment"><em>Environment</em></a>)</p></li>
<li><p><strong>key</strong> (<em>str</em>)</p></li>
<li><p><strong>checksum</strong> (<em>str</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.bccache.Bucket.environment">
<span class="sig-name descname"><span class="pre">environment</span></span><a class="headerlink" href="#jinja2.bccache.Bucket.environment" title="Link to this definition">¶</a></dt>
<dd><p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code> that created the bucket.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.bccache.Bucket.key">
<span class="sig-name descname"><span class="pre">key</span></span><a class="headerlink" href="#jinja2.bccache.Bucket.key" title="Link to this definition">¶</a></dt>
<dd><p>The unique cache key for this bucket</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.bccache.Bucket.code">
<span class="sig-name descname"><span class="pre">code</span></span><a class="headerlink" href="#jinja2.bccache.Bucket.code" title="Link to this definition">¶</a></dt>
<dd><p>The bytecode if it’s loaded, otherwise <code class="code docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.bccache.Bucket.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.bccache.Bucket.reset" title="Link to this definition">¶</a></dt>
<dd><p>Resets the bucket (unloads the bytecode).</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.bccache.Bucket.load_bytecode">
<span class="sig-name descname"><span class="pre">load_bytecode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.bccache.Bucket.load_bytecode" title="Link to this definition">¶</a></dt>
<dd><p>Loads bytecode from a file or file like object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>f</strong> (<em>BinaryIO</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.bccache.Bucket.write_bytecode">
<span class="sig-name descname"><span class="pre">write_bytecode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.bccache.Bucket.write_bytecode" title="Link to this definition">¶</a></dt>
<dd><p>Dump the bytecode into the file or file like object passed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>f</strong> (<em>IO</em><em>[</em><em>bytes</em><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.bccache.Bucket.bytecode_from_string">
<span class="sig-name descname"><span class="pre">bytecode_from_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.bccache.Bucket.bytecode_from_string" title="Link to this definition">¶</a></dt>
<dd><p>Load bytecode from bytes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>string</strong> (<em>bytes</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.bccache.Bucket.bytecode_to_string">
<span class="sig-name descname"><span class="pre">bytecode_to_string</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.bccache.Bucket.bytecode_to_string" title="Link to this definition">¶</a></dt>
<dd><p>Return the bytecode as bytes.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bytes</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<p>Builtin bytecode caches:</p>
<dl class="py class">
<dt class="sig sig-object py" id="jinja2.FileSystemBytecodeCache">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">FileSystemBytecodeCache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pattern</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'__jinja2_%s.cache'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.FileSystemBytecodeCache" title="Link to this definition">¶</a></dt>
<dd><p>A bytecode cache that stores bytecode on the filesystem.  It accepts
two arguments: The directory where the cache items are stored and a
pattern string that is used to build the filename.</p>
<p>If no directory is specified a default cache directory is selected.  On
Windows the user’s temp directory is used, on UNIX systems a directory
is created for the user in the system temp directory.</p>
<p>The pattern can be used to have multiple separate caches operate on the
same directory.  The default pattern is <code class="docutils literal notranslate"><span class="pre">'__jinja2_%s.cache'</span></code>.  <code class="docutils literal notranslate"><span class="pre">%s</span></code>
is replaced with the cache key.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">bcc</span> <span class="o">=</span> <span class="n">FileSystemBytecodeCache</span><span class="p">(</span><span class="s1">&#39;/tmp/jinja_cache&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.cache&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This bytecode cache supports clearing of the cache using the clear method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>directory</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>pattern</strong> (<em>str</em>)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="jinja2.MemcachedBytecodeCache">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">MemcachedBytecodeCache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'jinja2/bytecode/'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_memcache_errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.MemcachedBytecodeCache" title="Link to this definition">¶</a></dt>
<dd><p>This class implements a bytecode cache that uses a memcache cache for
storing the information.  It does not enforce a specific memcache library
(tummy’s memcache or cmemcache) but will accept any class that provides
the minimal interface required.</p>
<p>Libraries compatible with this class:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pallets/cachelib">cachelib</a></p></li>
<li><p><a class="reference external" href="https://pypi.org/project/python-memcached/">python-memcached</a></p></li>
</ul>
<p>(Unfortunately the django cache interface is not compatible because it
does not support storing binary data, only text. You can however pass
the underlying cache client to the bytecode cache which is available
as <code class="code docutils literal notranslate"><span class="pre">django.core.cache.cache._client</span></code>.)</p>
<p>The minimal interface for the client passed to the constructor is this:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client</strong> (<em>_MemcachedClient</em>)</p></li>
<li><p><strong>prefix</strong> (<em>str</em>)</p></li>
<li><p><strong>timeout</strong> (<em>int</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>ignore_memcache_errors</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="jinja2.MemcachedBytecodeCache.MinimalClientInterface">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MinimalClientInterface</span></span><a class="headerlink" href="#jinja2.MemcachedBytecodeCache.MinimalClientInterface" title="Link to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="jinja2.MemcachedBytecodeCache.MinimalClientInterface.set">
<span class="sig-name descname"><span class="pre">set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.MemcachedBytecodeCache.MinimalClientInterface.set" title="Link to this definition">¶</a></dt>
<dd><p>Stores the bytecode in the cache.  <code class="code docutils literal notranslate"><span class="pre">value</span></code> is a string and
<code class="code docutils literal notranslate"><span class="pre">timeout</span></code> the timeout of the key.  If timeout is not provided
a default timeout or no timeout should be assumed, if it’s
provided it’s an integer with the number of seconds the cache
item should exist.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.MemcachedBytecodeCache.MinimalClientInterface.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.MemcachedBytecodeCache.MinimalClientInterface.get" title="Link to this definition">¶</a></dt>
<dd><p>Returns the value for the cache key.  If the item does not
exist in the cache the return value must be <code class="code docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

</dd></dl>

<p>The other arguments to the constructor are the prefix for all keys that
is added before the actual cache key and the timeout for the bytecode in
the cache system.  We recommend a high (or no) timeout.</p>
<p>This bytecode cache does not support clearing of used items in the cache.
The clear method is a no-operation function.</p>
<details class="changelog">
<summary>Changelog</summary><div class="versionadded">
<p><span class="versionmodified added">Added in version 2.7: </span>Added support for ignoring memcache errors through the
<code class="code docutils literal notranslate"><span class="pre">ignore_memcache_errors</span></code> parameter.</p>
</div>
</details></dd></dl>

</section>
<section id="async-support">
<h2>Async Support<a class="headerlink" href="#async-support" title="Link to this heading">¶</a></h2>
<details class="changelog">
<summary>Changelog</summary><div class="versionadded">
<p><span class="versionmodified added">Added in version 2.9.</span></p>
</div>
</details><p>Jinja supports the Python <code class="docutils literal notranslate"><span class="pre">async</span></code> and <code class="docutils literal notranslate"><span class="pre">await</span></code> syntax. For the
template designer, this support (when enabled) is entirely transparent,
templates continue to look exactly the same. However, developers should
be aware of the implementation as it affects what types of APIs you can
use.</p>
<p>By default, async support is disabled. Enabling it will cause the
environment to compile different code behind the scenes in order to
handle async and sync code in an asyncio event loop. This has the
following implications:</p>
<ul class="simple">
<li><p>The compiled code uses <code class="docutils literal notranslate"><span class="pre">await</span></code> for functions and attributes, and
uses <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span></code> loops. In order to support using both async and
sync functions in this context, a small wrapper is placed around
all calls and access, which adds overhead compared to purely async
code.</p></li>
<li><p>Sync methods and filters become wrappers around their corresponding
async implementations where needed. For example, <code class="docutils literal notranslate"><span class="pre">render</span></code> invokes
<code class="docutils literal notranslate"><span class="pre">async_render</span></code>, and <code class="docutils literal notranslate"><span class="pre">|map</span></code> supports async iterables.</p></li>
</ul>
<p>Awaitable objects can be returned from functions in templates and any
function call in a template will automatically await the result. The
<code class="docutils literal notranslate"><span class="pre">await</span></code> you would normally add in Python is implied. For example, you
can provide a method that asynchronously loads data from a database, and
from the template designer’s point of view it can be called like any
other function.</p>
</section>
<section id="policies">
<span id="id3"></span><h2>Policies<a class="headerlink" href="#policies" title="Link to this heading">¶</a></h2>
<p>Starting with Jinja 2.9 policies can be configured on the environment
which can slightly influence how filters and other template constructs
behave.  They can be configured with the
<a class="reference internal" href="#jinja2.Environment.policies" title="jinja2.Environment.policies"><code class="xref py py-attr docutils literal notranslate"><span class="pre">policies</span></code></a> attribute.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">env</span><span class="o">.</span><span class="n">policies</span><span class="p">[</span><span class="s1">&#39;urlize.rel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;nofollow noopener&#39;</span>
</pre></div>
</div>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">truncate.leeway</span></code>:</dt><dd><p>Configures the leeway default for the <code class="code docutils literal notranslate"><span class="pre">truncate</span></code> filter.  Leeway as
introduced in 2.9 but to restore compatibility with older templates
it can be configured to <code class="code docutils literal notranslate"><span class="pre">0</span></code> to get the old behavior back.  The default
is <code class="code docutils literal notranslate"><span class="pre">5</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">urlize.rel</span></code>:</dt><dd><p>A string that defines the items for the <code class="code docutils literal notranslate"><span class="pre">rel</span></code> attribute of generated
links with the <code class="code docutils literal notranslate"><span class="pre">urlize</span></code> filter.  These items are always added.  The
default is <code class="code docutils literal notranslate"><span class="pre">noopener</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">urlize.target</span></code>:</dt><dd><p>The default target that is issued for links from the <code class="code docutils literal notranslate"><span class="pre">urlize</span></code> filter
if no other target is defined by the call explicitly.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">urlize.extra_schemes</span></code>:</dt><dd><p>Recognize URLs that start with these schemes in addition to the
default <code class="docutils literal notranslate"><span class="pre">http://</span></code>, <code class="docutils literal notranslate"><span class="pre">https://</span></code>, and <code class="docutils literal notranslate"><span class="pre">mailto:</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">json.dumps_function</span></code>:</dt><dd><p>If this is set to a value other than <code class="code docutils literal notranslate"><span class="pre">None</span></code> then the <code class="code docutils literal notranslate"><span class="pre">tojson</span></code> filter
will dump with this function instead of the default one.  Note that
this function should accept arbitrary extra arguments which might be
passed in the future from the filter.  Currently the only argument
that might be passed is <code class="code docutils literal notranslate"><span class="pre">indent</span></code>.  The default dump function is
<code class="docutils literal notranslate"><span class="pre">json.dumps</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">json.dumps_kwargs</span></code>:</dt><dd><p>Keyword arguments to be passed to the dump function.  The default is
<code class="docutils literal notranslate"><span class="pre">{'sort_keys':</span> <span class="pre">True}</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="ext-i18n-trimmed">
<dt><code class="docutils literal notranslate"><span class="pre">ext.i18n.trimmed</span></code>:</dt><dd><p>If this is set to <code class="code docutils literal notranslate"><span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">trans</span> <span class="pre">%}</span></code> blocks of the
<a class="reference internal" href="extensions.html#i18n-extension"><span class="std std-ref">i18n Extension</span></a> will always unify linebreaks and surrounding
whitespace as if the <code class="code docutils literal notranslate"><span class="pre">trimmed</span></code> modifier was used.</p>
</dd>
</dl>
</section>
<section id="utilities">
<h2>Utilities<a class="headerlink" href="#utilities" title="Link to this heading">¶</a></h2>
<p>These helper functions and classes are useful if you add custom filters or
functions to a Jinja environment.</p>
<dl class="py function">
<dt class="sig sig-object py" id="jinja2.pass_context">
<span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">pass_context</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.pass_context" title="Link to this definition">¶</a></dt>
<dd><p>Pass the <a class="reference internal" href="#jinja2.runtime.Context" title="jinja2.runtime.Context"><code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code></a> as the first argument
to the decorated function when called while rendering a template.</p>
<p>Can be used on functions, filters, and tests.</p>
<p>If only <code class="docutils literal notranslate"><span class="pre">Context.eval_context</span></code> is needed, use
<a class="reference internal" href="#jinja2.pass_eval_context" title="jinja2.pass_eval_context"><code class="xref py py-func docutils literal notranslate"><span class="pre">pass_eval_context()</span></code></a>. If only <code class="docutils literal notranslate"><span class="pre">Context.environment</span></code> is
needed, use <a class="reference internal" href="#jinja2.pass_environment" title="jinja2.pass_environment"><code class="xref py py-func docutils literal notranslate"><span class="pre">pass_environment()</span></code></a>.</p>
<details class="changelog">
<summary>Changelog</summary><div class="versionadded">
<p><span class="versionmodified added">Added in version 3.0.0: </span>Replaces <code class="docutils literal notranslate"><span class="pre">contextfunction</span></code> and <code class="docutils literal notranslate"><span class="pre">contextfilter</span></code>.</p>
</div>
</details><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>f</strong> (<em>F</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>F</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="jinja2.pass_eval_context">
<span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">pass_eval_context</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.pass_eval_context" title="Link to this definition">¶</a></dt>
<dd><p>Pass the <a class="reference internal" href="#jinja2.nodes.EvalContext" title="jinja2.nodes.EvalContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">EvalContext</span></code></a> as the first argument
to the decorated function when called while rendering a template.
See <a class="reference internal" href="#eval-context"><span class="std std-ref">Evaluation Context</span></a>.</p>
<p>Can be used on functions, filters, and tests.</p>
<p>If only <code class="docutils literal notranslate"><span class="pre">EvalContext.environment</span></code> is needed, use
<a class="reference internal" href="#jinja2.pass_environment" title="jinja2.pass_environment"><code class="xref py py-func docutils literal notranslate"><span class="pre">pass_environment()</span></code></a>.</p>
<details class="changelog">
<summary>Changelog</summary><div class="versionadded">
<p><span class="versionmodified added">Added in version 3.0.0: </span>Replaces <code class="docutils literal notranslate"><span class="pre">evalcontextfunction</span></code> and <code class="docutils literal notranslate"><span class="pre">evalcontextfilter</span></code>.</p>
</div>
</details><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>f</strong> (<em>F</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>F</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="jinja2.pass_environment">
<span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">pass_environment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.pass_environment" title="Link to this definition">¶</a></dt>
<dd><p>Pass the <a class="reference internal" href="#jinja2.Environment" title="jinja2.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code></a> as the first argument to
the decorated function when called while rendering a template.</p>
<p>Can be used on functions, filters, and tests.</p>
<details class="changelog">
<summary>Changelog</summary><div class="versionadded">
<p><span class="versionmodified added">Added in version 3.0.0: </span>Replaces <code class="docutils literal notranslate"><span class="pre">environmentfunction</span></code> and <code class="docutils literal notranslate"><span class="pre">environmentfilter</span></code>.</p>
</div>
</details><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>f</strong> (<em>F</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>F</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="jinja2.clear_caches">
<span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">clear_caches</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.clear_caches" title="Link to this definition">¶</a></dt>
<dd><p>Jinja keeps internal caches for environments and lexers.  These are
used so that Jinja doesn’t have to recreate environments and lexers all
the time.  Normally you don’t have to care about that but if you are
measuring memory consumption you may want to clean the caches.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="jinja2.is_undefined">
<span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">is_undefined</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.is_undefined" title="Link to this definition">¶</a></dt>
<dd><p>Check if the object passed is undefined.  This does nothing more than
performing an instance check against <a class="reference internal" href="#jinja2.Undefined" title="jinja2.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a> but looks nicer.
This can be used for custom filters or tests that want to react to
undefined variables.  For example a custom default filter can look like
this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">default</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">is_undefined</span><span class="p">(</span><span class="n">var</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">default</span>
    <span class="k">return</span> <span class="n">var</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>obj</strong> (<em>Any</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="exceptions">
<h2>Exceptions<a class="headerlink" href="#exceptions" title="Link to this heading">¶</a></h2>
<dl class="py exception">
<dt class="sig sig-object py" id="jinja2.TemplateError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">TemplateError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.TemplateError" title="Link to this definition">¶</a></dt>
<dd><p>Baseclass for all template errors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>message</strong> (<em>str</em><em> | </em><em>None</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="jinja2.UndefinedError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">UndefinedError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.UndefinedError" title="Link to this definition">¶</a></dt>
<dd><p>Raised if a template tries to operate on <a class="reference internal" href="#jinja2.Undefined" title="jinja2.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>message</strong> (<em>str</em><em> | </em><em>None</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="jinja2.TemplateNotFound">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">TemplateNotFound</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.TemplateNotFound" title="Link to this definition">¶</a></dt>
<dd><p>Raised if a template does not exist.</p>
<details class="changelog">
<summary>Changelog</summary><div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.11: </span>If the given name is <a class="reference internal" href="#jinja2.Undefined" title="jinja2.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a> and no message was
provided, an <a class="reference internal" href="#jinja2.UndefinedError" title="jinja2.UndefinedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UndefinedError</span></code></a> is raised.</p>
</div>
</details><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em><em> | </em><a class="reference internal" href="#jinja2.Undefined" title="jinja2.Undefined"><em>Undefined</em></a><em> | </em><em>None</em>)</p></li>
<li><p><strong>message</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="jinja2.TemplatesNotFound">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">TemplatesNotFound</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.TemplatesNotFound" title="Link to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#jinja2.TemplateNotFound" title="jinja2.TemplateNotFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">TemplateNotFound</span></code></a> but raised if multiple templates
are selected.  This is a subclass of <a class="reference internal" href="#jinja2.TemplateNotFound" title="jinja2.TemplateNotFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">TemplateNotFound</span></code></a>
exception, so just catching the base exception will catch both.</p>
<details class="changelog">
<summary>Changelog</summary><div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.11: </span>If a name in the list of names is <a class="reference internal" href="#jinja2.Undefined" title="jinja2.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a>, a message
about it being undefined is shown rather than the empty string.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.2.</span></p>
</div>
</details><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>names</strong> (<em>Sequence</em><em>[</em><em>str</em><em> | </em><a class="reference internal" href="#jinja2.Undefined" title="jinja2.Undefined"><em>Undefined</em></a><em>]</em>)</p></li>
<li><p><strong>message</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="jinja2.TemplateSyntaxError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">TemplateSyntaxError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lineno</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.TemplateSyntaxError" title="Link to this definition">¶</a></dt>
<dd><p>Raised to tell the user that there is a problem with the template.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message</strong> (<em>str</em>)</p></li>
<li><p><strong>lineno</strong> (<em>int</em>)</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>filename</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.TemplateSyntaxError.message">
<span class="sig-name descname"><span class="pre">message</span></span><a class="headerlink" href="#jinja2.TemplateSyntaxError.message" title="Link to this definition">¶</a></dt>
<dd><p>The error message.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.TemplateSyntaxError.lineno">
<span class="sig-name descname"><span class="pre">lineno</span></span><a class="headerlink" href="#jinja2.TemplateSyntaxError.lineno" title="Link to this definition">¶</a></dt>
<dd><p>The line number where the error occurred.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.TemplateSyntaxError.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#jinja2.TemplateSyntaxError.name" title="Link to this definition">¶</a></dt>
<dd><p>The load name for the template.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.TemplateSyntaxError.filename">
<span class="sig-name descname"><span class="pre">filename</span></span><a class="headerlink" href="#jinja2.TemplateSyntaxError.filename" title="Link to this definition">¶</a></dt>
<dd><p>The filename that loaded the template in the encoding of the
file system (most likely utf-8, or mbcs on Windows systems).</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="jinja2.TemplateRuntimeError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">TemplateRuntimeError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.TemplateRuntimeError" title="Link to this definition">¶</a></dt>
<dd><p>A generic runtime error in the template engine.  Under some situations
Jinja may raise this exception.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>message</strong> (<em>str</em><em> | </em><em>None</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="jinja2.TemplateAssertionError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.</span></span><span class="sig-name descname"><span class="pre">TemplateAssertionError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lineno</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.TemplateAssertionError" title="Link to this definition">¶</a></dt>
<dd><p>Like a template syntax error, but covers cases where something in the
template caused an error at compile time that wasn’t necessarily caused
by a syntax error.  However it’s a direct subclass of
<a class="reference internal" href="#jinja2.TemplateSyntaxError" title="jinja2.TemplateSyntaxError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TemplateSyntaxError</span></code></a> and has the same attributes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message</strong> (<em>str</em>)</p></li>
<li><p><strong>lineno</strong> (<em>int</em>)</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>filename</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="custom-filters">
<span id="writing-filters"></span><h2>Custom Filters<a class="headerlink" href="#custom-filters" title="Link to this heading">¶</a></h2>
<p>Filters are Python functions that take the value to the left of the
filter as the first argument and produce a new value. Arguments passed
to the filter are passed after the value.</p>
<p>For example, the filter <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">42|myfilter(23)</span> <span class="pre">}}</span></code> is called behind the
scenes as <code class="docutils literal notranslate"><span class="pre">myfilter(42,</span> <span class="pre">23)</span></code>.</p>
<p>Jinja comes with some <a class="reference internal" href="templates.html#builtin-filters"><span class="std std-ref">built-in filters</span></a>. To use
a custom filter, write a function that takes at least a <code class="docutils literal notranslate"><span class="pre">value</span></code>
argument, then register it in <a class="reference internal" href="#jinja2.Environment.filters" title="jinja2.Environment.filters"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Environment.filters</span></code></a>.</p>
<p>Here’s a filter that formats datetime objects:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">datetime_format</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;%H:%M </span><span class="si">%d</span><span class="s2">-%m-%y&quot;</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="nb">format</span><span class="p">)</span>

<span class="n">environment</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="s2">&quot;datetime_format&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">datetime_format</span>
</pre></div>
</div>
<p>Now it can be used in templates:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">article.pub_date</span><span class="o">|</span><span class="nf">datetime_format</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">article.pub_date</span><span class="o">|</span><span class="nf">datetime_format</span><span class="o">(</span><span class="s2">&quot;%B %Y&quot;</span><span class="o">)</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>Some decorators are available to tell Jinja to pass extra information to
the filter. The object is passed as the first argument, making the value
being filtered the second argument.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#jinja2.pass_environment" title="jinja2.pass_environment"><code class="xref py py-func docutils literal notranslate"><span class="pre">pass_environment()</span></code></a> passes the <a class="reference internal" href="#jinja2.Environment" title="jinja2.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code></a>.</p></li>
<li><p><a class="reference internal" href="#jinja2.pass_eval_context" title="jinja2.pass_eval_context"><code class="xref py py-func docutils literal notranslate"><span class="pre">pass_eval_context()</span></code></a> passes the <a class="reference internal" href="#eval-context"><span class="std std-ref">Evaluation Context</span></a>.</p></li>
<li><p><a class="reference internal" href="#jinja2.pass_context" title="jinja2.pass_context"><code class="xref py py-func docutils literal notranslate"><span class="pre">pass_context()</span></code></a> passes the current
<a class="reference internal" href="#jinja2.runtime.Context" title="jinja2.runtime.Context"><code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code></a>.</p></li>
</ul>
<p>Here’s a filter that converts line breaks into HTML <code class="docutils literal notranslate"><span class="pre">&lt;br&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;p&gt;</span></code>
tags. It uses the eval context to check if autoescape is currently
enabled before escaping the input and marking the output safe.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">pass_eval_context</span>
<span class="kn">from</span> <span class="nn">markupsafe</span> <span class="kn">import</span> <span class="n">Markup</span><span class="p">,</span> <span class="n">escape</span>

<span class="nd">@pass_eval_context</span>
<span class="k">def</span> <span class="nf">nl2br</span><span class="p">(</span><span class="n">eval_ctx</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="n">br</span> <span class="o">=</span> <span class="s2">&quot;&lt;br&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>

    <span class="k">if</span> <span class="n">eval_ctx</span><span class="o">.</span><span class="n">autoescape</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">escape</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="n">br</span> <span class="o">=</span> <span class="n">Markup</span><span class="p">(</span><span class="n">br</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;&lt;p&gt;</span><span class="si">{</span><span class="n">br</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">splitlines</span><span class="p">())</span><span class="si">}</span><span class="s2">&lt;\p&gt;&quot;</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(?:\r\n|\r(?!\n)|\n){2,}&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">Markup</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="k">if</span> <span class="n">autoescape</span> <span class="k">else</span> <span class="n">result</span>
</pre></div>
</div>
</section>
<section id="custom-tests">
<span id="writing-tests"></span><h2>Custom Tests<a class="headerlink" href="#custom-tests" title="Link to this heading">¶</a></h2>
<p>Test are Python functions that take the value to the left of the test as
the first argument, and return <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>. Arguments passed
to the test are passed after the value.</p>
<p>For example, the test <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">42</span> <span class="pre">is</span> <span class="pre">even</span> <span class="pre">}}</span></code> is called behind the scenes
as <code class="docutils literal notranslate"><span class="pre">is_even(42)</span></code>.</p>
<p>Jinja comes with some <a class="reference internal" href="templates.html#builtin-tests"><span class="std std-ref">built-in tests</span></a>. To use a
custom tests, write a function that takes at least a <code class="docutils literal notranslate"><span class="pre">value</span></code> argument,
then register it in <a class="reference internal" href="#jinja2.Environment.tests" title="jinja2.Environment.tests"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Environment.tests</span></code></a>.</p>
<p>Here’s a test that checks if a value is a prime number:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>

<span class="k">def</span> <span class="nf">is_prime</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">)))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="kc">True</span>

<span class="n">environment</span><span class="o">.</span><span class="n">tests</span><span class="p">[</span><span class="s2">&quot;prime&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">is_prime</span>
</pre></div>
</div>
<p>Now it can be used in templates:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">value</span> <span class="k">is</span> <span class="nf">prime</span> <span class="cp">%}</span>
<span class="x">    </span><span class="cp">{{</span> <span class="nv">value</span> <span class="cp">}}</span><span class="x"> is a prime number</span>
<span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
<span class="x">    </span><span class="cp">{{</span> <span class="nv">value</span> <span class="cp">}}</span><span class="x"> is not a prime number</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Some decorators are available to tell Jinja to pass extra information to
the test. The object is passed as the first argument, making the value
being tested the second argument.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#jinja2.pass_environment" title="jinja2.pass_environment"><code class="xref py py-func docutils literal notranslate"><span class="pre">pass_environment()</span></code></a> passes the <a class="reference internal" href="#jinja2.Environment" title="jinja2.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code></a>.</p></li>
<li><p><a class="reference internal" href="#jinja2.pass_eval_context" title="jinja2.pass_eval_context"><code class="xref py py-func docutils literal notranslate"><span class="pre">pass_eval_context()</span></code></a> passes the <a class="reference internal" href="#eval-context"><span class="std std-ref">Evaluation Context</span></a>.</p></li>
<li><p><a class="reference internal" href="#jinja2.pass_context" title="jinja2.pass_context"><code class="xref py py-func docutils literal notranslate"><span class="pre">pass_context()</span></code></a> passes the current
<a class="reference internal" href="#jinja2.runtime.Context" title="jinja2.runtime.Context"><code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code></a>.</p></li>
</ul>
</section>
<section id="evaluation-context">
<span id="eval-context"></span><h2>Evaluation Context<a class="headerlink" href="#evaluation-context" title="Link to this heading">¶</a></h2>
<p>The evaluation context (short eval context or eval ctx) makes it
possible to activate and deactivate compiled features at runtime.</p>
<p>Currently it is only used to enable and disable automatic escaping, but
it can be used by extensions as well.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">autoescape</span></code> setting should be checked on the evaluation context,
not the environment. The evaluation context will have the computed value
for the current template.</p>
<p>Instead of <code class="docutils literal notranslate"><span class="pre">pass_environment</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pass_environment</span>
<span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">do_something</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">env</span><span class="o">.</span><span class="n">autoescape</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">Markup</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">pass_eval_context</span></code> if you only need the setting:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pass_eval_context</span>
<span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="n">eval_ctx</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">do_something</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">eval_ctx</span><span class="o">.</span><span class="n">autoescape</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">Markup</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
<p>Or use <code class="docutils literal notranslate"><span class="pre">pass_context</span></code> if you need other context behavior as well:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pass_context</span>
<span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">do_something</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">eval_ctx</span><span class="o">.</span><span class="n">autoescape</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">Markup</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
<p>The evaluation context must not be modified at runtime.  Modifications
must only happen with a <a class="reference internal" href="extensions.html#jinja2.nodes.EvalContextModifier" title="jinja2.nodes.EvalContextModifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">nodes.EvalContextModifier</span></code></a> and
<a class="reference internal" href="extensions.html#jinja2.nodes.ScopedEvalContextModifier" title="jinja2.nodes.ScopedEvalContextModifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">nodes.ScopedEvalContextModifier</span></code></a> from an extension, not on the
eval context object itself.</p>
<dl class="py class">
<dt class="sig sig-object py" id="jinja2.nodes.EvalContext">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">jinja2.nodes.</span></span><span class="sig-name descname"><span class="pre">EvalContext</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">environment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.EvalContext" title="Link to this definition">¶</a></dt>
<dd><p>Holds evaluation time information.  Custom attributes can be attached
to it in extensions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#jinja2.Environment" title="jinja2.Environment"><em>Environment</em></a>)</p></li>
<li><p><strong>template_name</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.nodes.EvalContext.autoescape">
<span class="sig-name descname"><span class="pre">autoescape</span></span><a class="headerlink" href="#jinja2.nodes.EvalContext.autoescape" title="Link to this definition">¶</a></dt>
<dd><p><code class="code docutils literal notranslate"><span class="pre">True</span></code> or <code class="code docutils literal notranslate"><span class="pre">False</span></code> depending on if autoescaping is active or not.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.nodes.EvalContext.volatile">
<span class="sig-name descname"><span class="pre">volatile</span></span><a class="headerlink" href="#jinja2.nodes.EvalContext.volatile" title="Link to this definition">¶</a></dt>
<dd><p><code class="code docutils literal notranslate"><span class="pre">True</span></code> if the compiler cannot evaluate some expressions at compile
time.  At runtime this should always be <code class="code docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd></dl>

</dd></dl>

</section>
<section id="the-global-namespace">
<span id="global-namespace"></span><h2>The Global Namespace<a class="headerlink" href="#the-global-namespace" title="Link to this heading">¶</a></h2>
<p>The global namespace stores variables and functions that should be
available without needing to pass them to <a class="reference internal" href="#jinja2.Template.render" title="jinja2.Template.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Template.render()</span></code></a>. They
are also available to templates that are imported or included without
context. Most applications should only use <a class="reference internal" href="#jinja2.Environment.globals" title="jinja2.Environment.globals"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Environment.globals</span></code></a>.</p>
<p><a class="reference internal" href="#jinja2.Environment.globals" title="jinja2.Environment.globals"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Environment.globals</span></code></a> are intended for data that is common to all
templates loaded by that environment. <a class="reference internal" href="#jinja2.Template.globals" title="jinja2.Template.globals"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Template.globals</span></code></a> are
intended for data that is common to all renders of that template, and
default to <a class="reference internal" href="#jinja2.Environment.globals" title="jinja2.Environment.globals"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Environment.globals</span></code></a> unless they’re given in
<a class="reference internal" href="#jinja2.Environment.get_template" title="jinja2.Environment.get_template"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Environment.get_template()</span></code></a>, etc. Data that is specific to a
render should be passed as context to <a class="reference internal" href="#jinja2.Template.render" title="jinja2.Template.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Template.render()</span></code></a>.</p>
<p>Only one set of globals is used during any specific rendering. If
templates A and B both have template globals, and B extends A, then
only B’s globals are used for both when using <code class="docutils literal notranslate"><span class="pre">b.render()</span></code>.</p>
<p>Environment globals should not be changed after loading any templates,
and template globals should not be changed at any time after loading the
template. Changing globals after loading a template will result in
unexpected behavior as they may be shared between the environment and
other templates.</p>
</section>
<section id="low-level-api">
<span id="id4"></span><h2>Low Level API<a class="headerlink" href="#low-level-api" title="Link to this heading">¶</a></h2>
<p>The low level API exposes functionality that can be useful to understand some
implementation details, debugging purposes or advanced <a class="reference internal" href="extensions.html#jinja-extensions"><span class="std std-ref">extension</span></a> techniques.  Unless you know exactly what you are doing we
don’t recommend using any of those.</p>
<dl class="py method">
<dt class="sig sig-object py" id="jinja2.Environment.lex">
<span class="sig-prename descclassname"><span class="pre">Environment.</span></span><span class="sig-name descname"><span class="pre">lex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.lex" title="Link to this definition">¶</a></dt>
<dd><p>Lex the given sourcecode and return a generator that yields
tokens as tuples in the form <code class="docutils literal notranslate"><span class="pre">(lineno,</span> <span class="pre">token_type,</span> <span class="pre">value)</span></code>.
This can be useful for <a class="reference internal" href="extensions.html#writing-extensions"><span class="std std-ref">extension development</span></a>
and debugging templates.</p>
<p>This does not perform preprocessing.  If you want the preprocessing
of the extensions to be applied you have to filter source through
the <a class="reference internal" href="#jinja2.Environment.preprocess" title="jinja2.Environment.preprocess"><code class="xref py py-meth docutils literal notranslate"><span class="pre">preprocess()</span></code></a> method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<em>str</em>)</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>filename</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Iterator</em>[<em>Tuple</em>[int, str, str]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.Environment.parse">
<span class="sig-prename descclassname"><span class="pre">Environment.</span></span><span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.parse" title="Link to this definition">¶</a></dt>
<dd><p>Parse the sourcecode and return the abstract syntax tree.  This
tree of nodes is used by the compiler to convert the template into
executable source- or bytecode.  This is useful for debugging or to
extract information from templates.</p>
<p>If you are <a class="reference internal" href="extensions.html#writing-extensions"><span class="std std-ref">developing Jinja extensions</span></a>
this gives you a good overview of the node tree generated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<em>str</em>)</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>filename</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="extensions.html#jinja2.nodes.Template" title="jinja2.nodes.Template"><em>Template</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.Environment.preprocess">
<span class="sig-prename descclassname"><span class="pre">Environment.</span></span><span class="sig-name descname"><span class="pre">preprocess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.preprocess" title="Link to this definition">¶</a></dt>
<dd><p>Preprocesses the source with all extensions.  This is automatically
called for all parsing and compiling methods but <em>not</em> for <a class="reference internal" href="#jinja2.Environment.lex" title="jinja2.Environment.lex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lex()</span></code></a>
because there you usually only want the actual source tokenized.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<em>str</em>)</p></li>
<li><p><strong>name</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>filename</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.Template.new_context">
<span class="sig-prename descclassname"><span class="pre">Template.</span></span><span class="sig-name descname"><span class="pre">new_context</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shared</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">locals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Template.new_context" title="Link to this definition">¶</a></dt>
<dd><p>Create a new <code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code> for this template.  The vars
provided will be passed to the template.  Per default the globals
are added to the context.  If shared is set to <code class="code docutils literal notranslate"><span class="pre">True</span></code> the data
is passed as is to the context without adding the globals.</p>
<p><code class="code docutils literal notranslate"><span class="pre">locals</span></code> can be a dict of local variables for internal usage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vars</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>shared</strong> (<em>bool</em>)</p></li>
<li><p><strong>locals</strong> (<em>Mapping</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#jinja2.runtime.Context" title="jinja2.runtime.Context"><em>Context</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="jinja2.Template.root_render_func">
<span class="sig-prename descclassname"><span class="pre">Template.</span></span><span class="sig-name descname"><span class="pre">root_render_func</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Template.root_render_func" title="Link to this definition">¶</a></dt>
<dd><p>This is the low level render function.  It’s passed a <code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code>
that has to be created by <a class="reference internal" href="#jinja2.Template.new_context" title="jinja2.Template.new_context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">new_context()</span></code></a> of the same template or
a compatible template.  This render function is generated by the
compiler from the template code and returns a generator that yields
strings.</p>
<p>If an exception in the template code happens the template engine will
not rewrite the exception but pass through the original one.  As a
matter of fact this function should only be called from within a
<a class="reference internal" href="#jinja2.Template.render" title="jinja2.Template.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">render()</span></code></a> / <a class="reference internal" href="#jinja2.Template.generate" title="jinja2.Template.generate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">generate()</span></code></a> / <a class="reference internal" href="#jinja2.Template.stream" title="jinja2.Template.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stream()</span></code></a> call.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.Template.blocks">
<span class="sig-prename descclassname"><span class="pre">Template.</span></span><span class="sig-name descname"><span class="pre">blocks</span></span><a class="headerlink" href="#jinja2.Template.blocks" title="Link to this definition">¶</a></dt>
<dd><p>A dict of block render functions.  Each of these functions works exactly
like the <a class="reference internal" href="#jinja2.Template.root_render_func" title="jinja2.Template.root_render_func"><code class="xref py py-meth docutils literal notranslate"><span class="pre">root_render_func()</span></code></a> with the same limitations.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="jinja2.Template.is_up_to_date">
<span class="sig-prename descclassname"><span class="pre">Template.</span></span><span class="sig-name descname"><span class="pre">is_up_to_date</span></span><a class="headerlink" href="#jinja2.Template.is_up_to_date" title="Link to this definition">¶</a></dt>
<dd><p>This attribute is <code class="code docutils literal notranslate"><span class="pre">False</span></code> if there is a newer version of the template
available, otherwise <code class="code docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd></dl>

<div class="admonition-note admonition">
<p class="admonition-title">Note</p>
<p>The low-level API is fragile.  Future Jinja versions will try not to
change it in a backwards incompatible way but modifications in the Jinja
core may shine through.  For example if Jinja introduces a new AST node
in later versions that may be returned by <a class="reference internal" href="#jinja2.Environment.parse" title="jinja2.Environment.parse"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parse()</span></code></a>.</p>
</div>
</section>
<section id="the-meta-api">
<h2>The Meta API<a class="headerlink" href="#the-meta-api" title="Link to this heading">¶</a></h2>
<details class="changelog">
<summary>Changelog</summary><div class="versionadded">
<p><span class="versionmodified added">Added in version 2.2.</span></p>
</div>
</details><p>The meta API returns some information about abstract syntax trees that
could help applications to implement more advanced template concepts.  All
the functions of the meta API operate on an abstract syntax tree as
returned by the <a class="reference internal" href="#jinja2.Environment.parse" title="jinja2.Environment.parse"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Environment.parse()</span></code></a> method.</p>
<dl class="py function">
<dt class="sig sig-object py" id="jinja2.meta.find_undeclared_variables">
<span class="sig-prename descclassname"><span class="pre">jinja2.meta.</span></span><span class="sig-name descname"><span class="pre">find_undeclared_variables</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ast</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.meta.find_undeclared_variables" title="Link to this definition">¶</a></dt>
<dd><p>Returns a set of all variables in the AST that will be looked up from
the context at runtime.  Because at compile time it’s not known which
variables will be used depending on the path the execution takes at
runtime, all variables are returned.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">meta</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ast</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;{</span><span class="si">% s</span><span class="s1">et foo = 42 %}{{ bar + foo }}&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meta</span><span class="o">.</span><span class="n">find_undeclared_variables</span><span class="p">(</span><span class="n">ast</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;bar&#39;</span><span class="p">}</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="admonition-implementation admonition">
<p class="admonition-title">Implementation</p>
<p>Internally the code generator is used for finding undeclared variables.
This is good to know because the code generator might raise a
<code class="xref py py-exc docutils literal notranslate"><span class="pre">TemplateAssertionError</span></code> during compilation and as a matter of
fact this function can currently raise that exception as well.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ast</strong> (<a class="reference internal" href="extensions.html#jinja2.nodes.Template" title="jinja2.nodes.Template"><em>Template</em></a>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Set</em>[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="jinja2.meta.find_referenced_templates">
<span class="sig-prename descclassname"><span class="pre">jinja2.meta.</span></span><span class="sig-name descname"><span class="pre">find_referenced_templates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ast</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.meta.find_referenced_templates" title="Link to this definition">¶</a></dt>
<dd><p>Finds all the referenced templates from the AST.  This will return an
iterator over all the hardcoded template extensions, inclusions and
imports.  If dynamic inheritance or inclusion is used, <code class="code docutils literal notranslate"><span class="pre">None</span></code> will be
yielded.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">meta</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ast</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;{</span><span class="si">% e</span><span class="s1">xtends &quot;layout.html&quot; %}{</span><span class="si">% i</span><span class="s1">nclude helper %}&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">meta</span><span class="o">.</span><span class="n">find_referenced_templates</span><span class="p">(</span><span class="n">ast</span><span class="p">))</span>
<span class="go">[&#39;layout.html&#39;, None]</span>
</pre></div>
</div>
<p>This function is useful for dependency tracking.  For example if you want
to rebuild parts of the website after a layout template has changed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ast</strong> (<a class="reference internal" href="extensions.html#jinja2.nodes.Template" title="jinja2.nodes.Template"><em>Template</em></a>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Iterator</em>[str | None]</p>
</dd>
</dl>
</dd></dl>

</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
  <span id="sidebar-top"></span>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  
    
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/jinja-logo-sidebar.png" alt="Logo of Jinja"/>
            </a></p>
  

  <h3>Contents</h3>
  <ul>
<li><a class="reference internal" href="#">API</a><ul>
<li><a class="reference internal" href="#basics">Basics</a></li>
<li><a class="reference internal" href="#high-level-api">High Level API</a><ul>
<li><a class="reference internal" href="#jinja2.Environment"><code class="docutils literal notranslate"><span class="pre">Environment</span></code></a><ul>
<li><a class="reference internal" href="#jinja2.Environment.shared"><code class="docutils literal notranslate"><span class="pre">Environment.shared</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Environment.sandboxed"><code class="docutils literal notranslate"><span class="pre">Environment.sandboxed</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Environment.filters"><code class="docutils literal notranslate"><span class="pre">Environment.filters</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Environment.tests"><code class="docutils literal notranslate"><span class="pre">Environment.tests</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Environment.globals"><code class="docutils literal notranslate"><span class="pre">Environment.globals</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Environment.policies"><code class="docutils literal notranslate"><span class="pre">Environment.policies</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Environment.code_generator_class"><code class="docutils literal notranslate"><span class="pre">Environment.code_generator_class</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Environment.context_class"><code class="docutils literal notranslate"><span class="pre">Environment.context_class</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Environment.overlay"><code class="docutils literal notranslate"><span class="pre">Environment.overlay()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Environment.undefined"><code class="docutils literal notranslate"><span class="pre">Environment.undefined()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Environment.add_extension"><code class="docutils literal notranslate"><span class="pre">Environment.add_extension()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Environment.extend"><code class="docutils literal notranslate"><span class="pre">Environment.extend()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Environment.compile_expression"><code class="docutils literal notranslate"><span class="pre">Environment.compile_expression()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Environment.compile_templates"><code class="docutils literal notranslate"><span class="pre">Environment.compile_templates()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Environment.list_templates"><code class="docutils literal notranslate"><span class="pre">Environment.list_templates()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Environment.join_path"><code class="docutils literal notranslate"><span class="pre">Environment.join_path()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Environment.get_template"><code class="docutils literal notranslate"><span class="pre">Environment.get_template()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Environment.select_template"><code class="docutils literal notranslate"><span class="pre">Environment.select_template()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Environment.get_or_select_template"><code class="docutils literal notranslate"><span class="pre">Environment.get_or_select_template()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Environment.from_string"><code class="docutils literal notranslate"><span class="pre">Environment.from_string()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#jinja2.Template"><code class="docutils literal notranslate"><span class="pre">Template</span></code></a><ul>
<li><a class="reference internal" href="#jinja2.Template.globals"><code class="docutils literal notranslate"><span class="pre">Template.globals</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Template.name"><code class="docutils literal notranslate"><span class="pre">Template.name</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Template.filename"><code class="docutils literal notranslate"><span class="pre">Template.filename</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Template.render"><code class="docutils literal notranslate"><span class="pre">Template.render()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Template.generate"><code class="docutils literal notranslate"><span class="pre">Template.generate()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Template.stream"><code class="docutils literal notranslate"><span class="pre">Template.stream()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Template.render_async"><code class="docutils literal notranslate"><span class="pre">Template.render_async()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Template.generate_async"><code class="docutils literal notranslate"><span class="pre">Template.generate_async()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Template.make_module"><code class="docutils literal notranslate"><span class="pre">Template.make_module()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Template.module"><code class="docutils literal notranslate"><span class="pre">Template.module</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#jinja2.environment.TemplateStream"><code class="docutils literal notranslate"><span class="pre">TemplateStream</span></code></a><ul>
<li><a class="reference internal" href="#jinja2.environment.TemplateStream.dump"><code class="docutils literal notranslate"><span class="pre">TemplateStream.dump()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.environment.TemplateStream.disable_buffering"><code class="docutils literal notranslate"><span class="pre">TemplateStream.disable_buffering()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.environment.TemplateStream.enable_buffering"><code class="docutils literal notranslate"><span class="pre">TemplateStream.enable_buffering()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#autoescaping">Autoescaping</a><ul>
<li><a class="reference internal" href="#jinja2.select_autoescape"><code class="docutils literal notranslate"><span class="pre">select_autoescape()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#notes-on-identifiers">Notes on Identifiers</a></li>
<li><a class="reference internal" href="#undefined-types">Undefined Types</a><ul>
<li><a class="reference internal" href="#jinja2.Undefined"><code class="docutils literal notranslate"><span class="pre">Undefined</span></code></a><ul>
<li><a class="reference internal" href="#jinja2.Undefined._undefined_hint"><code class="docutils literal notranslate"><span class="pre">Undefined._undefined_hint</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Undefined._undefined_obj"><code class="docutils literal notranslate"><span class="pre">Undefined._undefined_obj</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Undefined._undefined_name"><code class="docutils literal notranslate"><span class="pre">Undefined._undefined_name</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Undefined._undefined_exception"><code class="docutils literal notranslate"><span class="pre">Undefined._undefined_exception</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Undefined._fail_with_undefined_error"><code class="docutils literal notranslate"><span class="pre">Undefined._fail_with_undefined_error()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#jinja2.ChainableUndefined"><code class="docutils literal notranslate"><span class="pre">ChainableUndefined</span></code></a></li>
<li><a class="reference internal" href="#jinja2.DebugUndefined"><code class="docutils literal notranslate"><span class="pre">DebugUndefined</span></code></a></li>
<li><a class="reference internal" href="#jinja2.StrictUndefined"><code class="docutils literal notranslate"><span class="pre">StrictUndefined</span></code></a></li>
<li><a class="reference internal" href="#jinja2.make_logging_undefined"><code class="docutils literal notranslate"><span class="pre">make_logging_undefined()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-context">The Context</a><ul>
<li><a class="reference internal" href="#jinja2.runtime.Context"><code class="docutils literal notranslate"><span class="pre">Context</span></code></a><ul>
<li><a class="reference internal" href="#jinja2.runtime.Context.parent"><code class="docutils literal notranslate"><span class="pre">Context.parent</span></code></a></li>
<li><a class="reference internal" href="#jinja2.runtime.Context.vars"><code class="docutils literal notranslate"><span class="pre">Context.vars</span></code></a></li>
<li><a class="reference internal" href="#jinja2.runtime.Context.environment"><code class="docutils literal notranslate"><span class="pre">Context.environment</span></code></a></li>
<li><a class="reference internal" href="#jinja2.runtime.Context.exported_vars"><code class="docutils literal notranslate"><span class="pre">Context.exported_vars</span></code></a></li>
<li><a class="reference internal" href="#jinja2.runtime.Context.name"><code class="docutils literal notranslate"><span class="pre">Context.name</span></code></a></li>
<li><a class="reference internal" href="#jinja2.runtime.Context.blocks"><code class="docutils literal notranslate"><span class="pre">Context.blocks</span></code></a></li>
<li><a class="reference internal" href="#jinja2.runtime.Context.eval_ctx"><code class="docutils literal notranslate"><span class="pre">Context.eval_ctx</span></code></a></li>
<li><a class="reference internal" href="#jinja2.runtime.Context.call"><code class="docutils literal notranslate"><span class="pre">Context.call()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.runtime.Context.get"><code class="docutils literal notranslate"><span class="pre">Context.get()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.runtime.Context.resolve"><code class="docutils literal notranslate"><span class="pre">Context.resolve()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.runtime.Context.resolve_or_missing"><code class="docutils literal notranslate"><span class="pre">Context.resolve_or_missing()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.runtime.Context.get_exported"><code class="docutils literal notranslate"><span class="pre">Context.get_exported()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.runtime.Context.get_all"><code class="docutils literal notranslate"><span class="pre">Context.get_all()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#loaders">Loaders</a><ul>
<li><a class="reference internal" href="#jinja2.BaseLoader"><code class="docutils literal notranslate"><span class="pre">BaseLoader</span></code></a><ul>
<li><a class="reference internal" href="#jinja2.BaseLoader.get_source"><code class="docutils literal notranslate"><span class="pre">BaseLoader.get_source()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.BaseLoader.load"><code class="docutils literal notranslate"><span class="pre">BaseLoader.load()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#jinja2.FileSystemLoader"><code class="docutils literal notranslate"><span class="pre">FileSystemLoader</span></code></a></li>
<li><a class="reference internal" href="#jinja2.PackageLoader"><code class="docutils literal notranslate"><span class="pre">PackageLoader</span></code></a></li>
<li><a class="reference internal" href="#jinja2.DictLoader"><code class="docutils literal notranslate"><span class="pre">DictLoader</span></code></a></li>
<li><a class="reference internal" href="#jinja2.FunctionLoader"><code class="docutils literal notranslate"><span class="pre">FunctionLoader</span></code></a></li>
<li><a class="reference internal" href="#jinja2.PrefixLoader"><code class="docutils literal notranslate"><span class="pre">PrefixLoader</span></code></a></li>
<li><a class="reference internal" href="#jinja2.ChoiceLoader"><code class="docutils literal notranslate"><span class="pre">ChoiceLoader</span></code></a></li>
<li><a class="reference internal" href="#jinja2.ModuleLoader"><code class="docutils literal notranslate"><span class="pre">ModuleLoader</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#bytecode-cache">Bytecode Cache</a><ul>
<li><a class="reference internal" href="#jinja2.BytecodeCache"><code class="docutils literal notranslate"><span class="pre">BytecodeCache</span></code></a><ul>
<li><a class="reference internal" href="#jinja2.BytecodeCache.load_bytecode"><code class="docutils literal notranslate"><span class="pre">BytecodeCache.load_bytecode()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.BytecodeCache.dump_bytecode"><code class="docutils literal notranslate"><span class="pre">BytecodeCache.dump_bytecode()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.BytecodeCache.clear"><code class="docutils literal notranslate"><span class="pre">BytecodeCache.clear()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#jinja2.bccache.Bucket"><code class="docutils literal notranslate"><span class="pre">Bucket</span></code></a><ul>
<li><a class="reference internal" href="#jinja2.bccache.Bucket.environment"><code class="docutils literal notranslate"><span class="pre">Bucket.environment</span></code></a></li>
<li><a class="reference internal" href="#jinja2.bccache.Bucket.key"><code class="docutils literal notranslate"><span class="pre">Bucket.key</span></code></a></li>
<li><a class="reference internal" href="#jinja2.bccache.Bucket.code"><code class="docutils literal notranslate"><span class="pre">Bucket.code</span></code></a></li>
<li><a class="reference internal" href="#jinja2.bccache.Bucket.reset"><code class="docutils literal notranslate"><span class="pre">Bucket.reset()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.bccache.Bucket.load_bytecode"><code class="docutils literal notranslate"><span class="pre">Bucket.load_bytecode()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.bccache.Bucket.write_bytecode"><code class="docutils literal notranslate"><span class="pre">Bucket.write_bytecode()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.bccache.Bucket.bytecode_from_string"><code class="docutils literal notranslate"><span class="pre">Bucket.bytecode_from_string()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.bccache.Bucket.bytecode_to_string"><code class="docutils literal notranslate"><span class="pre">Bucket.bytecode_to_string()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#jinja2.FileSystemBytecodeCache"><code class="docutils literal notranslate"><span class="pre">FileSystemBytecodeCache</span></code></a></li>
<li><a class="reference internal" href="#jinja2.MemcachedBytecodeCache"><code class="docutils literal notranslate"><span class="pre">MemcachedBytecodeCache</span></code></a><ul>
<li><a class="reference internal" href="#jinja2.MemcachedBytecodeCache.MinimalClientInterface"><code class="docutils literal notranslate"><span class="pre">MemcachedBytecodeCache.MinimalClientInterface</span></code></a><ul>
<li><a class="reference internal" href="#jinja2.MemcachedBytecodeCache.MinimalClientInterface.set"><code class="docutils literal notranslate"><span class="pre">MemcachedBytecodeCache.MinimalClientInterface.set()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.MemcachedBytecodeCache.MinimalClientInterface.get"><code class="docutils literal notranslate"><span class="pre">MemcachedBytecodeCache.MinimalClientInterface.get()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#async-support">Async Support</a></li>
<li><a class="reference internal" href="#policies">Policies</a></li>
<li><a class="reference internal" href="#utilities">Utilities</a><ul>
<li><a class="reference internal" href="#jinja2.pass_context"><code class="docutils literal notranslate"><span class="pre">pass_context()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.pass_eval_context"><code class="docutils literal notranslate"><span class="pre">pass_eval_context()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.pass_environment"><code class="docutils literal notranslate"><span class="pre">pass_environment()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.clear_caches"><code class="docutils literal notranslate"><span class="pre">clear_caches()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.is_undefined"><code class="docutils literal notranslate"><span class="pre">is_undefined()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#exceptions">Exceptions</a><ul>
<li><a class="reference internal" href="#jinja2.TemplateError"><code class="docutils literal notranslate"><span class="pre">TemplateError</span></code></a></li>
<li><a class="reference internal" href="#jinja2.UndefinedError"><code class="docutils literal notranslate"><span class="pre">UndefinedError</span></code></a></li>
<li><a class="reference internal" href="#jinja2.TemplateNotFound"><code class="docutils literal notranslate"><span class="pre">TemplateNotFound</span></code></a></li>
<li><a class="reference internal" href="#jinja2.TemplatesNotFound"><code class="docutils literal notranslate"><span class="pre">TemplatesNotFound</span></code></a></li>
<li><a class="reference internal" href="#jinja2.TemplateSyntaxError"><code class="docutils literal notranslate"><span class="pre">TemplateSyntaxError</span></code></a><ul>
<li><a class="reference internal" href="#jinja2.TemplateSyntaxError.message"><code class="docutils literal notranslate"><span class="pre">TemplateSyntaxError.message</span></code></a></li>
<li><a class="reference internal" href="#jinja2.TemplateSyntaxError.lineno"><code class="docutils literal notranslate"><span class="pre">TemplateSyntaxError.lineno</span></code></a></li>
<li><a class="reference internal" href="#jinja2.TemplateSyntaxError.name"><code class="docutils literal notranslate"><span class="pre">TemplateSyntaxError.name</span></code></a></li>
<li><a class="reference internal" href="#jinja2.TemplateSyntaxError.filename"><code class="docutils literal notranslate"><span class="pre">TemplateSyntaxError.filename</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#jinja2.TemplateRuntimeError"><code class="docutils literal notranslate"><span class="pre">TemplateRuntimeError</span></code></a></li>
<li><a class="reference internal" href="#jinja2.TemplateAssertionError"><code class="docutils literal notranslate"><span class="pre">TemplateAssertionError</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#custom-filters">Custom Filters</a></li>
<li><a class="reference internal" href="#custom-tests">Custom Tests</a></li>
<li><a class="reference internal" href="#evaluation-context">Evaluation Context</a><ul>
<li><a class="reference internal" href="#jinja2.nodes.EvalContext"><code class="docutils literal notranslate"><span class="pre">EvalContext</span></code></a><ul>
<li><a class="reference internal" href="#jinja2.nodes.EvalContext.autoescape"><code class="docutils literal notranslate"><span class="pre">EvalContext.autoescape</span></code></a></li>
<li><a class="reference internal" href="#jinja2.nodes.EvalContext.volatile"><code class="docutils literal notranslate"><span class="pre">EvalContext.volatile</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#the-global-namespace">The Global Namespace</a></li>
<li><a class="reference internal" href="#low-level-api">Low Level API</a><ul>
<li><a class="reference internal" href="#jinja2.Environment.lex"><code class="docutils literal notranslate"><span class="pre">Environment.lex()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Environment.parse"><code class="docutils literal notranslate"><span class="pre">Environment.parse()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Environment.preprocess"><code class="docutils literal notranslate"><span class="pre">Environment.preprocess()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Template.new_context"><code class="docutils literal notranslate"><span class="pre">Template.new_context()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Template.root_render_func"><code class="docutils literal notranslate"><span class="pre">Template.root_render_func()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Template.blocks"><code class="docutils literal notranslate"><span class="pre">Template.blocks</span></code></a></li>
<li><a class="reference internal" href="#jinja2.Template.is_up_to_date"><code class="docutils literal notranslate"><span class="pre">Template.is_up_to_date</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-meta-api">The Meta API</a><ul>
<li><a class="reference internal" href="#jinja2.meta.find_undeclared_variables"><code class="docutils literal notranslate"><span class="pre">find_undeclared_variables()</span></code></a></li>
<li><a class="reference internal" href="#jinja2.meta.find_referenced_templates"><code class="docutils literal notranslate"><span class="pre">find_referenced_templates()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3>Navigation</h3>
<ul>
  <li><a href="index.html">Overview</a>
    <ul>
          <li>Previous: <a href="intro.html" title="previous chapter">Introduction</a>
          <li>Next: <a href="sandbox.html" title="next chapter">Sandbox</a>
    </ul>
  </li>
</ul>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><div id="ethical-ad-placement"></div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2007 Pallets.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    </div>
  </body>
</html>